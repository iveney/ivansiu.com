<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Zigang Xiao]]></title>
  <link href="http://blog.ivansiu.com/atom.xml" rel="self"/>
  <link href="http://blog.ivansiu.com/"/>
  <updated>2017-04-04T01:25:25-07:00</updated>
  <id>http://blog.ivansiu.com/</id>
  <author>
    <name><![CDATA[Zigang Xiao (Ivan)]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Migrating from dropbox public folder]]></title>
    <link href="http://blog.ivansiu.com/blog/2017/04/03/migrating-from-dropbox-public-folder/"/>
    <updated>2017-04-03T02:22:32-07:00</updated>
    <id>http://blog.ivansiu.com/blog/2017/04/03/migrating-from-dropbox-public-folder</id>
    <content type="html"><![CDATA[<p>Dropbox recently removed its public folder feature, which was used to host my blog’s images. I have to figure out a solution to host and fix the paths to these images…</p>
<!-- more -->
<p>Dropbox <a href="https://www.dropbox.com/help/16">announced</a> that <em>As of March 15, 2017 the Public folder in your Dropbox account has been converted into a standard folder.</em> Sad, all my previous links are hosted on Dropbox, and they all become invalid URLs.</p>
<p>I figured that I have to use another image hosting service. After some searching online, <a href="http://cloudinary.com/invites/lpov9zyyucivvxsnalc5/qebjx4vsaxc746ormmqa">Cloundinary</a> seems to be a good option. One design of my hosted images are that they are organized in sub-folders under a ‘blog’ folder. This means that if I want to seamlessly convert the links, I need to preserve the folder structure too.</p>
<p>Cloudinary seems to suggest they support auto-creating folders. Unfortunately that does not quite work for me.</p>
<figure>
<img src="http://res.cloudinary.com/maomao/image/upload/v1491293789/blog/Cloudinary_Management_Console_-_Settings.png" alt="settings" /><figcaption>settings</figcaption>
</figure>
<p>In fact, I wrote a small script to do this.</p>
<div class="bogus-wrapper">
<notextile>
<figure class="code">
<figcaption>
<span>Upload a folder to cloudinary</span>
</figcaption>
<div class="highlight">
<table>
<tr>
<td class="gutter">
<pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre>
</td>
<td class="code">
<pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">os</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">cloudinary</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">cloudinary.uploader</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">cloudinary.api</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Upload the folder in rootdir to cloudinary, preserving the file structure</span>
</span><span class='line'>
</span><span class='line'><span class="n">cloudinary</span><span class="o">.</span><span class="n">config</span><span class="p">(</span>
</span><span class='line'>  <span class="n">cloud_name</span> <span class="o">=</span> <span class="s">&quot;&lt;name&gt;&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="n">api_key</span> <span class="o">=</span> <span class="s">&quot;&lt;your key&gt;&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="n">api_secret</span> <span class="o">=</span> <span class="s">&quot;&lt;your secret&gt;&quot;</span>
</span><span class='line'><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">rootdir</span> <span class="o">=</span> <span class="s">&#39;blog&#39;</span>
</span><span class='line'><span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">subs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">rootdir</span><span class="p">):</span>
</span><span class='line'>    <span class="k">for</span> <span class="nb">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
</span><span class='line'>        <span class="n">cloudinary</span><span class="o">.</span><span class="n">uploader</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span>
</span><span class='line'>            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="nb">file</span><span class="p">),</span>
</span><span class='line'>            <span class="n">folder</span><span class="o">=</span><span class="n">root</span><span class="p">,</span> <span class="n">use_filename</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
</span><span class='line'>            <span class="n">unique_filename</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">resource_type</span><span class="o">=</span><span class="s">&#39;auto&#39;</span><span class="p">)</span>
</span></code></pre>
</td>
</tr>
</table>
</div>
</figure>
</notextile>
</div>
<p>With that, I did a simple sed run on all my post sources:</p>
<div class="bogus-wrapper">
<notextile>
<figure class="code">
<figcaption>
<span>Upload a folder to cloudinary</span>
</figcaption>
<div class="highlight">
<table>
<tr>
<td class="gutter">
<pre class="line-numbers"><span class='line-number'>1</span>
</pre>
</td>
<td class="code">
<pre><code class='python'><span class='line'><span class="n">sed</span> <span class="o">-</span><span class="n">i</span> <span class="s">&#39;&#39;</span> <span class="s">&#39;s/&lt;dropbox base url&gt;/&lt;cloundinary base url&gt;/&#39;</span> <span class="o">*.</span><span class="n">markdown</span>
</span></code></pre>
</td>
</tr>
</table>
</div>
</figure>
</notextile>
</div>
<p>then rake preview. Boom! All the images are shown again!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[在美國換輪胎的經歷]]></title>
    <link href="http://blog.ivansiu.com/blog/2017/04/02/zai-mei-guo-huan-lun-tai-de-jing-li/"/>
    <updated>2017-04-02T21:43:00-07:00</updated>
    <id>http://blog.ivansiu.com/blog/2017/04/02/zai-mei-guo-huan-lun-tai-de-jing-li</id>
    <content type="html"><![CDATA[<p>最近給車換了輪胎，發覺學問非常大，決定把經歷記錄下來。</p>
<!-- more -->
<h2 id="背景">背景</h2>
<p>我開的車是 MB-C300。買完後才發現，自己的輪胎是所謂的 “runflat”。這東西的好處是，即使是爆胎了，它的 sidewall<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a> 足夠堅硬，所以可以支持已經失去氣壓的輪胎在 50mph 的速度以內再走 50 miles。而壞處就是…… 幾乎沒法修，一旦損毀，基本上只能馬上趕去修車店，而且由於算是比較新的技術，不一定馬上有貨；而且造價一般也比較貴。由於 sidewall 硬，一般也會使得駕駛非常 bumpy （這點我深有同感，車子開起來非常顛簸，感覺一直在抖，但是好處是感覺非常敏感抓地，飆起來時很有 sporty 的感覺）。最後，一般帶了 runflat 的車子，都不會再配給備胎，所以如果爆胎了，那麼只能乖乖去修車店了，當然，好處就是少帶了一個備胎，trunk 可以省出很多空間。除了以上這些，根據我對我自己輪胎的觀察，還發現一到冬天，胎壓降得特別快，基本上2個月就要去打一次氣。</p>
<p>上面說的那些，在我開了五年的舊車上從來沒有體驗過，因爲一般我都定期半年保養，而胎壓什麼的都應該在保養時搞定了。這也間接導致了我對輪胎非常小白，因爲舊車的輪胎似乎非常耐擦，我只是在買回來後換過一次，接下來五年關於輪胎的問題真的一次沒遇過。</p>
<h2 id="runflats">Runflats</h2>
<p>說起 runflat，可真是多牢騷。由於我的車買的是運動版，配了 19’ 的 wheel 以及 Pirelli P-Zero Summer runflats。開車至今一年半，我的左前胎就壞過兩次[^flat tire]。好在都在保修期內，所以基本上只花了幾十塊免費換新胎<a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a>。但是這一來一去也是非常花時間的，還不能開車上班。</p>
<p>最近，我發現我的右前胎的外側基本上已經磨平了。剛發現那會非常震驚，因爲我的車才開了 15k miles 不到，竟然就快掛了。後來經過種種網上的研究，這款胎的確壽命就是很短！因爲 Pirelli 是意大利專給跑車做 performance tires 的…… 所以比較 prestigious，而這一款又是特別的薄，所以網上很多人都說甚至不到 10k 就要換了。</p>
<h2 id="選擇新輪胎">選擇新輪胎</h2>
<p>網上做了大量功課，發現原配 runflat 的車裝 non-runflat 也是可以的。想起之前的種種麻煩，斷然決定還是入手 non-runflat。在 <a href="tirerack.com">tireack</a> 上做了功課，基本上瞭解了有幾個考慮：</p>
<ul>
<li>Summer vs. All season: summer tires。 適合在溫度不低於結冰的地區使用，在乾溼的路上，防滑與操縱都很好。其實，基本上就是加州這種地方。但是，在雪地上會非常危險。All season 顧名思義，犧牲了在普通路面行走的性能，使得可以在雪地上行走。</li>
<li>壽命。根據 UTQG<a href="#fn3" class="footnoteRef" id="fnref3"><sup>3</sup></a> 的定義，我原車胎的 treadwear 才 220! 而大衆喜聞樂見那些輪胎，則一般都能上到 500，也怪不得我以前那部車開了那麼就一點問題也沒有。</li>
<li>價格。這個其實問題不大，因爲我原裝的輪胎一個要上 $400 … 基本上任何輪胎都會比它便宜。</li>
</ul>
<p>tirerack 的界面做得很好。在它的幫助下，我基本上鎖定了以下這幾款：</p>
<ul>
<li>MICHELIN PILOT SUPER SPORT (PSS)。這是大家有口皆碑的 performance summer tires。基本上對車有追求的都會推薦這款。缺點是可能太 sporty，並且 treadwear 比較低。</li>
<li>MICHELIN PILOT SPORT A/S 3+。根據網上評論，跟 PSS 其實差別不大，會稍微舒適一點。而且很 tricky 的一點是，雖然評級是 all season，但是性能跟 summer tire 很接近。最大的優點是，treadwear 非常好。</li>
<li>Continental EXTREMECONTACT DWS 06。也是評價很不錯的，但是比起上面那兩款來說則是比較中規中矩沒有太多兩點。</li>
</ul>
<p>優劣很明顯了，我很快就決定了入手 PS3+。這裏要再表揚一下 tirerack，線下功能也做得非常好。選好了 tire 後，還能寄到指定的 tire shop 進行安裝，並且價格也是有保證的。根據它的推薦，我很快發現了 <a href="https://www.yelp.com/biz/nielsen-automotive-san-carlos">Nielsen Automotive</a>。這家店在 yelp 是100+的五星級review。而且後來也證實，他們的服務非常靠譜！（見下節）</p>
<h2 id="網上購買輪胎與比價">網上購買輪胎與比價</h2>
<p>tirerack 給定的價格還是非常好的。我一套輪胎下來，才不到 800 刀。相對來說，costco 的價格更低，但是仔細研究後發覺，他們的 service 口碑非常差。這也是我最終決定選擇 tirerack 的原因。</p>
<p>一切準備就緒後，我就在網上下了 order，讓他們寄到 Nielsen Automotive。這裏有兩個小插曲：</p>
<ol type="1">
<li>我的車原配輪胎是 front 225 rear 255 的 (tire width)，而這款輪胎的推薦配置是 225 + 245，或 235 + 255。tirerack 的 salesagent 電話專門跟我確認後，決定還是要 225 + 255 的</li>
<li>電話裏，sales rep 還跟我提到如果我 hold order 兩天，那麼將會 qualify 原廠的一個 rebate，價值 $70 的 prepaid card。tirerack 又再次立功了，這點我非常感激。</li>
</ol>
<h2 id="安裝輪胎">安裝輪胎</h2>
<p>輪胎是從 NV 寄過來的，週三寄出週四就到了。週四下午我接到 Nielsen Automotive 的電話後，約好週五下午去修。他們的報價是 $100，比 tirerack 上推薦的還要便宜 $20!</p>
<p>週五去到店裏，發覺是一個外表非常老舊的店。修車的也都是老頭子。但是！老頭子們都非常非常 nice &amp; gentle，讓我感覺非常好，沒有那種普通修車店那種笑里藏刀的感覺。我一開頭還不相信，知道最後面修好車發現，他們是真真正正的 nice，一點也沒坑我。說好了一個小時最後其實花了兩個小時，修車技師 Chris 主動給我道歉並解釋說這個系列的車比較難，有一個地方他總也搞不定，所以花費了更多的時間。老先生很誠懇，我當然也不好意思多說什麼。開出去走了一圈，發現輪胎氣壓不是非常對稱，讓 Chris 再幫忙 balance 一下，也是二話不說就幫我弄好了。當我準備給他一點小費時，他還非常禮貌地拒絕了。不收小費，這我在美國還真是第一次見到。</p>
<p>吐血推薦這間 tire shop。地址是 888 El Camino Real, San Carlos, CA 94070。</p>
<h2 id="總結">總結</h2>
<p>經歷過這次讓我對輪胎的維護與保養有了比較深的認識。tirerack 價錢合理並且服務也好，更重要的是上面有大量的科普文章，非常有營養。</p>
<section class="footnotes">
<hr />
<ol>
<li id="fn1"><p>指的就是輪胎的側面，起的支撐作用。 [^flat tire]: 當然，部份原因也是由於我保養不善……此去不表<a href="#fnref1">↩</a></p></li>
<li id="fn2"><p>一般輪胎都自帶 warranty，比如一年內，以及車輪磨損在接受範圍以內，遇到任何 road hazard 以及質量原因，廠家包換。<a href="#fnref2">↩</a></p></li>
<li id="fn3"><p>Uniform Tire Quality Grade<a href="#fnref3">↩</a></p></li>
</ol>
</section>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[美国留学：学生保险拔智齿]]></title>
    <link href="http://blog.ivansiu.com/blog/2015/05/14/study-abroad-wisdom-teeth-removal-with-student-insurance/"/>
    <updated>2015-05-14T20:30:58-07:00</updated>
    <id>http://blog.ivansiu.com/blog/2015/05/14/study-abroad-wisdom-teeth-removal-with-student-insurance</id>
    <content type="html"><![CDATA[<figure>
<img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/2015-05-14-study-abroad-wisdom-teeth-removal-with-student-insurance.jpg" alt="Wisdom Teeth (source)" /><figcaption>Wisdom Teeth (<a href="http://www.dentalstudio101.com/blog/wisdom-teeth-do-i-leave-them-in-or-take-them-out/">source</a>)</figcaption>
</figure>
<p>在快奔三的年纪，终于长出了最后一颗智齿。</p>
<!-- more -->
<p>本来想着说这辈子不用拔智齿的——因为我25岁前就已经长完了三颗智齿，并且都 align 得非常好，并没有阻生。之前在中国时的医生也告诉我，没有必要拔掉，因为他们出来得迟，因此比起其他牙齿也会掉得迟。所以以后牙齿掉完后，他们还会在那里，可以做到固定镶牙的用途。当然我在美国没有听到有医生这样提起的，而且美国的习惯是 4 颗一起全部拔掉，一了百了！听起来有点 scary，只是他们的考虑也不是没有道理：智齿一般会长歪，即使没有长歪，也可能引发各种疾病，比如由于长得比较靠里，比较难清洁到，因此很容易蛀牙。更甚的是，蛀牙后，会引起正常的牙齿也蛀牙！这个情况就发生了在我身上：我的下面两颗支持都有蛀牙，并且引起了旁边的蛀牙！为了这个问题，我已经补过两次牙齿。这成为了我这次拔掉他们的最大原因。</p>
<p>我的最后一颗智齿是左上那颗，长歪了，好在不是顶着别的牙齿，而是横向的生长，朝着舌头方向长出来了。所以舌头蹭到很不舒服。大概5个多月前刚长出来时去检查过，还拍了 panarama 的 x-ray （学校的 dental delta 保险三年只 cover 一次，这次只能自费，花了大概 70 刀）。但由于只是刚长成，并不清楚趋势，因此我也带着侥幸的心理没有理他（考虑到别的三颗都乖乖的直直地长了出来！）。最近终于把找工、TA、论文的事情忙得差不多，感觉不拔不行了，赶紧联系医生。可惜之前去的 dental clinic 不能做 oral surgery，于是医生 refer 我去当地最大的 local hospital：carle。总结起来，大概 timeline 是这样的：</p>
<p>12月份看的牙医，拍 X-ray，医生诊断需要拔智齿，开 referal paper 让我去 carl 做『oral surgery』。我偷懒没有马上去做。</p>
<p>5月初打电话给 carle schedule 了一个 appointment。护士告诉我让 clinic 发 x-ray 给他们。于是我打电话让 clinic 发，他们说会在我 appointment 前发过去（结果后来没发！）</p>
<p>过了一个星期去做了 examination，竟然是免费的。护士帮我一检查，发觉 x-ray 竟然没发过来。于是我马上电话过去让他们发。护士和医生很好人，说如果他们不发，给我免费做一个。等了好久，终于给我发了过来。医生也是顺理成章地问了下我情况，问我要不要做 sedation，全身麻醉 (anesthesia，Dental IV)，还是做 local 的局部麻醉。作为一个小白，当然是咨询医生意见。医生说大家都做 IV，睡一觉醒来就拔好了。于是我就说好我也要（只是没想到后来麻醉竟然要 375）。由于我以为我保险马上要过期，于是眼泪汪汪地让他给我这周马上做手术。他们非常 accomodating，愣是给我 schedule 到了第二天。拔智齿在美国算是小手术了，因此要签一张 paper，类似于 disclosure。走之前，我拿着手术清单去 patient account 查价 （check against insurance），但是前台阿姨说不能马上知道结果，只能给我第二天打电话。回到家后，我对着 bill 大概估算了一下，一颗牙 285 x 4 = 1140 + 麻醉 375 = 1515，而保险的 upper limit 是 1000，即使 100% cover 也要自付 515。感觉还是太贵，于是打电话问他们能不能取消掉。得到的答复是，我必须跟医生商量。但是医生一直 busy，一直没有给我答复。直到他们下班前，护士才电话我说，第二天跟医生讲就好。整个流程持续了大概 2 个多小时，花了 3 刀 parking。</p>
<p>第二天早上收到医院电话，得到具体 insurance 的信息以及bill。我掐指一算：一颗牙 285 x 4 = 1140 + 麻醉 375 = 1515，但是保险 upper limit 是 1000，而且不！包！麻！醉！这样 quote 下来我的价格是 (285x4 - 45) * 30% + 375 + 45 = 748.5，其中 45 是保险的 deductible。并且由于 carle 不属于 delta dental 的 network，保险只 cover 70%，which means I pay 30%! 太贵了。于是我果断选择了只做局部麻醉，因为是免费的。这样下来就是我的 out of pocket 是 373.5, which is not too bad。果然穷人多受罪…… 不过换个角度想，全身麻醉怎么说还是比较伤身的，没用也好。不过为了预防万一，我还是做好了全身麻醉的准备。根据给我的资料，全身麻醉需要在术前8小时不能进食，任何水、candy、gum都不能吃！（据说是为了防止你大小便失禁？）由于我手术是下午1:45开始，那么算起来我最迟也要在凌晨 5 点时吃东西……要那么早爬起来准备+吃，还是算了吧。我昨天晚上是8点吃的晚饭，这样算起来我有将近 18 小时滴！水！未！进！T_T 并且由于全麻带来的作用，术后人会不清醒，还必须有人带你去医院负责把你运回家，非常严肃，当然也非常麻烦。</p>
<p>下午开车到了位于 champaign 的医院（carle 在 urbana 和 champaign 各有一间，医生轮岗）。check-in ，乖乖地贡献 373.5 后等了半小时进手术室。总的来说护士们都很 caring，会一直跟我聊天，也很详细地给我解释术后的一些注意事项。不久后，医生助手进来给我打麻药。老实说，整个过程中最痛的其实是这个环节，因为他们会给智齿附近的 gum 打针，扎进去恐怖+疼的感觉，一半一半吧。整个人也会不自觉地绷紧了，双手牢牢地按住自己大腿。不过其实局部麻醉对我来说也是常事了，之前补牙时也做过，所以多少有点心理准备。不久后，整个嘴麻了，连吞口水也感觉有点困难。</p>
<p>医生进来后手术正式开始。新出来的那颗（左上），我估计 5 秒就拔出来了，一点感觉都没有。医生会 count：this is one。我当时心里一阵窃喜，原来这么水啊！可惜如意算盘打错了，拔下面那颗时，我感觉整颗死死地嵌在牙腔里，怎么也拔不出来，牙根处有点隐隐作疼，但更疼的，是我的下巴。因为作用力太大，我感觉整个下巴都要被扯起来了…… 也许是因为太牢固，也许是因为补过牙，医生决定把它钻开再拔。于是就听到了钻头在口腔里巨大的声音。钻好后，医生估计是一片一片地拔出来的，其实我感觉不到具体手法，只知道他们一直在里面捣鼓。期间医生也会预警：你接下来会听到一些碎裂的声音…… 右上的智齿虽然也是 fully erupted，但是比起下面的好拔多了，虽然不如左上的容易，但是不需要钻就拔了出来。右下的是最 hard core 的，不仅要钻，而且钻完了也花了好大功夫才解决。估计下面的开口比较严重，所以医生都给我缝合了。没感觉到他给我穿针，但是能感觉到他拉线和打结时把牙肉缝起来。其实真正拔牙的整个流程估计不超过10分钟？老实说也没有网上写的那么恐怖，可能是我身体素质比较好吧 :)</p>
<p>完了后做起来歇息了一下便走了（说到这，我都佩服我自己了，没有过敏，没有烟酒，没有遗传病，没有重大病史，各种指标正常，拔牙不叫不闹，估计医生也喜欢我这种病人吧…… 感谢上天感谢爹娘给我的强壮体魄~）。回家后一直要咬着纸巾止血。大概3-4个小时候麻药效果过去了。根据护士说法，我可以服用一些 ibuprofen （美国常见止疼药）来止疼。把纸巾取出来后的大概半个小时，真的很疼。小时候牙疼的那种感觉又回来了。不过好在半小时过后就没怎么疼了，也许是止疼药功效上来了，也可能伤口愈合得好。总的来说，还是没什么大问题。</p>
<p>接下来要做的，就是看它恢复得如何了。刚拔完自然是不敢吃比较硬的食物的。乖乖地给自己熬了粥喝。希望身体赶紧回复过来，一周后还要去 DC 和 NY 旅行呢~</p>
<h2 id="后记">后记</h2>
<p>过了两周，总算没那么疼了。牙线也开始脱落，能正常吃东西了。我觉得我恢复得还是不错的，没有需要用上医生开的处方药，只是用 OTC 的 ibuprofen 即可止疼。只是每天早上起来时会比较疼，因为平躺着会让它充血。</p>
<p>PS. 如果有在 UIUC 的朋友也想去拔智齿，可以先去 Creative Smiles Dental （在 marketplace 那边）检查。没有租生的智齿它们是可以直接拔的。提我的名字（说我 refer 你）可以每人各拿 $50 的优惠 :)</p>
<figure>
<img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/dentalreferal.jpg" alt="Referal" /><figcaption>Referal</figcaption>
</figure>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Popular watches under $150]]></title>
    <link href="http://blog.ivansiu.com/blog/2015/05/04/popular-watches-under-150/"/>
    <updated>2015-05-04T11:24:35-07:00</updated>
    <id>http://blog.ivansiu.com/blog/2015/05/04/popular-watches-under-150</id>
    <content type="html"><![CDATA[<figure>
<img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/watches/top10.jpg" />
</figure>
<p>I’ve been looking around entry-level watches for some time. Recently, I answered a <a href="http://www.zhihu.com/question/29695310/answer/45929205?group_id=577053538367111168">question</a> in Zhihu (Chinese Quora), and I feel like to transcribe this collection in my blog.</p>
<!-- more -->
<h2 id="dress-watch">Dress Watch</h2>
<figure>
<img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/watches/rodina.jpg" alt="Rodina R005, $119 via Amazon" /><figcaption>Rodina R005, $119 via Amazon</figcaption>
</figure>
<p>This watch is discussed in my previous <a href="http://blog.ivansiu.com/blog/2015/03/26/watch-review-rodina-r005gb/">blog post</a>. It is a bit debatable as some people think it completely ripoff the NOMOS Tangente. However, considering there so many Rolex Submariner homages, this should also considered a homage. It uses a Seagull ST1701 movement, sapphire crystal, and display case back. At this price point, it is really a good deal. Get in on <a href="http://www.amazon.com/gp/product/B00VLY2106/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=B00VLY2106&amp;linkCode=as2&amp;tag=zigxia-20&amp;linkId=3ZTM75JFDBHOIEIK">Amazon</a>.</p>
<figure>
<img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/watches/orient_bambino.png" alt="Orient Bambino, $130 via Amazon" /><figcaption>Orient Bambino, $130 via Amazon</figcaption>
</figure>
<p>I’ve always like the ORIENT logo, much more than SEIKO’s. This watch features Roman literals, blue hands and white classic dial. <a href="http://www.amazon.com/gp/product/B00MVPB7UO/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=B00MVPB7UO&amp;linkCode=as2&amp;tag=zigxia-20&amp;linkId=MGHKNNXNNVCQ5GOO">Amazon</a></p>
<p><img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/watches/DW_men.jpg" alt="Daniel Wellington, $120 Men" /> <img src="https://dl.dropboxusercontent.com/u/3315210/blog/watches/DW_women.jpg" alt="$85 Women" /></p>
<p>This has been quite popular in China, due to their successful marketing campaign. It is a quartz (Japanese) watch with multiple variation, and looks really good. Get the best looking ones <a href="http://www.amazon.com/gp/product/B00BKQT5RC/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=B00BKQT5RC&amp;linkCode=as2&amp;tag=zigxia-20&amp;linkId=K2IGKVEEO7YTRQ6T">here</a> and <a href="http://www.amazon.com/gp/product/B00D19B4DE/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=B00D19B4DE&amp;linkCode=as2&amp;tag=zigxia-20&amp;linkId=2AHHERE54PC7HT5A">here</a>.</p>
<h2 id="divers-watch">Diver’s Watch</h2>
<p>Now moves to my favorite category. Rolex designed the true classic look of today’s diver’s watch. However, the retail price for a submariner is probably too high for lots of people. Fortunately, Japanese brands SEIKO and ORIENT provide some affordable options here.</p>
<figure>
<img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/watches/seiko_skx007.jpg" alt="SEIKO skx007" /><figcaption>SEIKO skx007</figcaption>
</figure>
<p>A very popular one. Considered as a poor man’s Rolex. You can get it around $180 at <a href="http://www.amazon.com/gp/product/B000B5OD4I/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=B000B5OD4I&amp;linkCode=as2&amp;tag=zigxia-20&amp;linkId=TWJOKBR4I6MCBOXS">Amazon</a>.</p>
<figure>
<img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/watches/orient_ray.jpg" alt="Orient Ray" /><figcaption>Orient Ray</figcaption>
</figure>
<p>Also a very popular one. As I said, I really like Orient’s LOGO. I find it far more interesting to see the lions and shields rather than just the word “SEIKO”. $130 at <a href="http://www.amazon.com/gp/product/B00A6U2EWQ/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=B00A6U2EWQ&amp;linkCode=as2&amp;tag=zigxia-20&amp;linkId=GTWCDGRCTEYGW7QY">Amazon</a>.</p>
<figure>
<img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/watches/orient_mako.png" alt="Orient Mako" /><figcaption>Orient Mako</figcaption>
</figure>
<p>Ray’s brother, Mako. The watch face is slightly different, thinner hands, arabic numbers at 6, 9 and 12 o’clock. Also around $130 at <a href="http://www.amazon.com/gp/product/B001EWEQ3A/ref=as_li_qf_sp_asin_il_tl?ie=UTF8&amp;camp=1789&amp;creative=9325&amp;creativeASIN=B001EWEQ3A&amp;linkCode=as2&amp;tag=zigxia-20&amp;linkId=H37LB2B5KGLJ5NMQ">Amazon</a>.</p>
<h2 id="fieldflightpilot-watch">Field/Flight/Pilot Watch</h2>
<p><img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/watches/seiko_snzg13.jpg" alt="Seiko SNZG13" /> <img src="https://dl.dropboxusercontent.com/u/3315210/blog/watches/seiko_snzg13_lume.jpg" /></p>
<p>One of my favorite. It’s lume is fantastic and got countless compliments. Only $100 at <a href="http://www.amazon.com/gp/product/B006BUE84M/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=B006BUE84M&amp;linkCode=as2&amp;tag=zigxia-20&amp;linkId=MA3O42A4RNTDGIY6">Amazon</a>.</p>
<p><img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/watches/orient_pilot.jpg" alt="Orient FER2A001B0 Pilot Watch" /> <img src="https://dl.dropboxusercontent.com/u/3315210/blog/watches/orient_pilot_lume.jpg" /></p>
<p>This is my favorite style. Look at the beautifully designed digits! It’s lume is also awesome: lumes at all numbers! When it’s on sale you can <a href="http://amzn.to/1GCsWQG">get it at $125</a>.</p>
<figure>
<img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/watches/seiko_snk809.jpg" alt="SEIKO SNK 809" /><figcaption>SEIKO SNK 809</figcaption>
</figure>
<p>Bestseller in Amazon. Come with various colors (<a href="http://amzn.to/1HY92E4">black</a>, <a href="http://amzn.to/1EVJrMP">green</a>, <a href="http://amzn.to/1bJZXCj">blue</a>, <a href="http://amzn.to/1GCtCpo">beige</a>). It’s so cheap ($50) that people are getting all colors and rotate everyday. Also, since it’s so affordable, it will become your workhorse. You won’t treat it like million dollar watch that only put in your locker.</p>
<h2 id="skeleton-watch">Skeleton Watch</h2>
<figure>
<img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/watches/seagull_m182SK.jpg" alt="Seagull M182SK" /><figcaption>Seagull M182SK</figcaption>
</figure>
<p>Quite popular in watchuseek forum. Very nice seagull movement with a complete see-through design. That said, it might be too busy to see the hands. $135 at <a href="http://www.amazon.com/gp/product/B00KCJZ0TA/ref=as_li_qf_sp_asin_il_tl?ie=UTF8&amp;camp=1789&amp;creative=9325&amp;creativeASIN=B00KCJZ0TA&amp;linkCode=as2&amp;tag=zigxia-20&amp;linkId=QUCGQW7E3HYSEZH4">Amazon</a>.</p>
<figure>
<img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/watches/fossil_grant.jpg" alt="Fossil Grant" /><figcaption>Fossil Grant</figcaption>
</figure>
<p>This skeleton is cleaner than the Seagull’s. Nevertheless, Seagull is more reputable than Fossil in watch making. <a href="http://amzn.to/1HYa178">Amazon</a>.</p>
<h2 id="conclusion">Conclusion</h2>
<p>So there you have it. These watches are very affordable and have the great quality that earn them reputation. You can see them in nearly every watch forums. If you just started watch collecting, consider getting one of them. Let me know if you have any other suggestions.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Watch Review: Rodina R005GB]]></title>
    <link href="http://blog.ivansiu.com/blog/2015/03/26/watch-review-rodina-r005gb/"/>
    <updated>2015-03-26T21:04:16-07:00</updated>
    <id>http://blog.ivansiu.com/blog/2015/03/26/watch-review-rodina-r005gb</id>
    <content type="html"><![CDATA[<figure>
<img src="https://lh5.googleusercontent.com/-DHaUjkLmpQ0/VRTXaDnoOkI/AAAAAAAA-F0/4JzbtSb1RJE/s400/Tangente_38_sapphire_crystal_back___Beautiful_watches_purchased_online__Directly_from_NOMOS_Glash%25C3%25BCtte_.jpg" alt="Tangente" /><figcaption>Tangente</figcaption>
</figure>
<p>So NOMOS has this awesome looking Bauhaus style watch: <a href="http://www.nomos-store.com/en/Watches/Model-series/Tangente/Watches-with-manual-winding/Tangente-38-sapphire-crystal-back.html">Tangente</a>. Apparently everyone wants one, but not everyone wants to break their bank ($2330 USD).</p>
<p>Luckily, we have an alternative here: <a href="http://www.amazon.com/gp/product/B00URBA0SE/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=B00URBA0SE&amp;linkCode=as2&amp;tag=zigxia-20&amp;linkId=DH2F6ZTQGNLSXYBJ">Rodina series watches</a> <a href="http://www.amazon.com/gp/product/B00VPYP77Q/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=B00VPYP77Q&amp;linkCode=as2&amp;tag=zigxia-20&amp;linkId=FTNKEBI6N26BLLVP">(or with Date)</a>.</p>
<!-- more -->
<h2 id="the-review">The Review</h2>
<p>Some people think it a copycat watch, while some others think it a homage. The truth is, with price only <span>$</span>139.99, it is a really affordable price. During Valentine’s, it is on sale with $99.99 shipped. The website frequently has sales. Without further delay, I bought it when it’s one sale. It is shipped from Tianjin, China via EMS, and USPS after it arrives in US. After 10 days of waiting, I finally received it!</p>
<figure>
<img src="https://lh5.googleusercontent.com/-uh4tvjSo6yM/VRTUSOBoe2I/AAAAAAAA-Fo/3Cx_AjIpRCc/s400/IMG_8984.JPG" />
</figure>
<p>It’s funny that as others commented, the soft bag is supposed to be used to hold the watch, but after opening the case, the watch is not wrapped around it.</p>
<figure>
<img src="https://lh4.googleusercontent.com/-OhoM3D8u22U/VRTUUjElyNI/AAAAAAAA-Fo/17Mr6V1-Huo/s400/IMG_8985.jpg" />
</figure>
<p>However, the watch itself is fine and intact. It is wrapped in plastic strips under good protection.</p>
<figure>
<img src="https://lh6.googleusercontent.com/-7vCiEK1jxSs/VRTUU_mqj9I/AAAAAAAA-Fo/ypmPc-IAySw/s400/IMG_8986.jpg" />
</figure>
<p>These are all the stuff in the box. I can understand that, as I don’t think Rodina is not any famous big brand. Don’t expect full service inside the box.</p>
<p>This is really how it should come:</p>
<figure>
<img src="https://lh4.googleusercontent.com/-8kESTihzmog/VRTUZ7NI9sI/AAAAAAAA-Fo/ZOk-P5oeyO0/s400/IMG_8988.jpg" />
</figure>
<p>It’s transparent back, which is a perfect show-off for automatic watches. As you can see, it’s 5ATM, which is slightly better than 3ATM that a lot of cheap watches have. It is said to have a Seagull ST1713 movement (with date function).</p>
<figure>
<img src="https://lh4.googleusercontent.com/-e_gTWOlsQMc/VRTUcRZO9cI/AAAAAAAA-Fo/4cR1sOZCzyE/s400/IMG_8989.jpg" />
</figure>
<p>The crown is really a bummer. If you go to look for its pictures online, the ‘R’ will have a blue coating. However, the blue coating on mine is totally off. I wiped them clean instead. You can see there is still blue pieces in the cleaning cloth. Nevertheless, I like the letter ‘R’ in the crown.</p>
<figure>
<img src="https://lh3.googleusercontent.com/-n22-mUUP55c/VRTUhsM80PI/AAAAAAAA-Fo/X0FECKd4s7Q/s400/IMG_8990.jpg" />
</figure>
<p>The watch dial is unbeatable. Case is made with sapphire crystal, which is astonishing for this price. The hands are in blue dark blue, which looks really cool. The only problem as someone else pointed out is that the fonts does not match: the numbers are sans-serif, while the Rodina letters are serif fonts. Furthermore, ‘CHINA MADE’ sounds weird, although I can understand they may feel proud to say this.</p>
<figure>
<img src="https://lh6.googleusercontent.com/-HreJu-9IrBg/VRTUjogbEXI/AAAAAAAA-Fo/4mAOA_ufWrY/s400/IMG_8991.jpg" />
</figure>
<p>The strap. Leather is of cheap quality as expected. Feels like plastic. However, the making is not bad. The stitching, the holes, are definitely satisfactory. I picked the brown one as I think black is too dressy for everyday wear. I have a skinny wrist, so I almost used the last hole.</p>
<figure>
<img src="https://lh3.googleusercontent.com/-WrOPXIPPD94/VRTUrQgxtJI/AAAAAAAA-Fo/5K5i97ImhlQ/s400/IMG_8992.jpg" />
</figure>
<p>This is how it looks like on my wrist. 39mm is a bit small for me. However, the winding piece is not stable enough. It creates noise and you can feel it moving when you move your arm and thus triggering the winding action. The ticking sound is pretty small though, compared to the notorious Timex Weekender.</p>
<figure>
<img src="https://lh5.googleusercontent.com/-U4V1wHrHaZQ/VRTUuCl0QvI/AAAAAAAA-Fo/PGDKGRzcJBM/s400/IMG_8993.jpg" />
</figure>
<figure>
<img src="https://lh3.googleusercontent.com/-qy74EG9HQRg/VRTUtvSs_3I/AAAAAAAA-Fo/Vc6hmOA7WV0/s400/IMG_8994.jpg" />
</figure>
<h2 id="conclusion">Conclusion</h2>
<p>With lots of imperfection, this watch is still worth buying. I really like it’s style. I wish I get one with roman literals and dates (the one with Roman literal does not have dates). I wish the leather is of better quality. But with this price point, one cannot expect too much, and the quality of the watch itself is really good. Here’s the pros and cons:</p>
<p>Pros:</p>
<ul>
<li>Affordable price</li>
<li>Good style, similar to the famous NOMOS Bauhaus style</li>
<li>Seagull ST1713 automatic movement</li>
<li>5ATM (instead of 3ATM)</li>
<li>Stainless steel case</li>
<li>Sapphire crystal!</li>
</ul>
<p>Cons:</p>
<ul>
<li>Noisy winding action</li>
<li>Low quality leather (notice that the strap is good, only the leather is bad quality)</li>
<li>Fonts in the dial do not match</li>
<li>Blue coating in the crown not printed at the perfect location</li>
<li>Whether it is a copycat or homage is debatable.</li>
</ul>
<p>In general, my first impression for the watch is good. Might need some more time wearing it to see if , what do you think?</p>
<p>[Update] After several days of wear, I have to say that I really like the style. I also observed that the watch accuracy is excellent: only 2~3 seconds slow.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[精英主义与投票考试]]></title>
    <link href="http://blog.ivansiu.com/blog/2014/10/01/jing-ying-zhu-yi-yu-tou-piao-kao-shi/"/>
    <updated>2014-10-01T20:29:30-07:00</updated>
    <id>http://blog.ivansiu.com/blog/2014/10/01/jing-ying-zhu-yi-yu-tou-piao-kao-shi</id>
    <content type="html"><![CDATA[<h2 id="题记">题记</h2>
<p>有感于最近香港要求普选的民运，心中大概有点想法。</p>
<!-- more -->
<p>考虑到自己对政治的认识与时间的限制，为了防止与 别人无谓的争辩， 不想把这些想法发到社交网络上，毕竟，这只是个人的想法，或者更严格来说， 是一种理念。因为很多主义与思想，都没有绝对的对错，我们只能做到根据自己的人生观与思想来 做出取舍。而偏偏这个世界上又很多人喜欢跟别人 argue，一定要说服别人为止——我根本没有这个时间 与精力去辩论。另外，这也同时印证了我为什么是 pro-精英主义的，我深知自己对这些事物的认识 不够，所以自觉需要更严谨的学习才有资本与别人争论。我相信多年以后，自己的看法一定又会 有所改变。彼时回首看这些文章，一定会觉得自己幼稚。不过无论怎么说，还是记录下自己的想法。</p>
<h2 id="精英主义与民粹主义">精英主义与民粹主义</h2>
<p>我对这件事情的看法很复杂——我对于民运人士的诉求部分支持又带有保留。争取投票权与心中的理想 当然是一种很好的东西，这点我是支持的。但是普选是否就意味着民主？更大的两个问题是，</p>
<ol type="1">
<li><p>普选就能保证选出来的人代表民意吗？ 这就相当于是多数人的暴政。对于这点，已经有很多论述。 这不是我的主要主题，在此不述。</p></li>
<li><p>如何保证选民投票的质量？ 很显然很多人限于知识水平，也许只能看到对自己最直接的利弊影响， 而并无法理解哪位候选人的纲领政策对社会，对国家，对世界的更深层次影响，反过来说，这些影响 也许反而会给自己带来并不那么直接的有害效益。 同时，没有自己独立思考过的选民，往往对候选人的印象仅仅来源于道听途说以及政治宣传，甚至 金钱操作，因此这些投票是受到影响的。而『知道自己在做什么』的人实在太少了，这一点在我 求学生涯中越来越明显越来越深刻。我见过太多例子，并不是表面直觉看起来那么简单，经过 深层分析抽丝剥茧后，才发觉真相往往是非常 counter-intuitive 的。对于知识水平完全不在 一个层面的人的 bold move，很多时候只能说 『too simple, sometimes naive』。</p></li>
</ol>
<p>所以，这些选票，我认为必须是有权重的。</p>
<p>第二点体现了我 pro-精英主义的最重要原因。想对地，支持普选的更偏向于民粹主义。 两者都有他们的 pros and cons。这两篇文章介绍得很详细：</p>
<ul>
<li><a href="http://www.zhihu.com/question/21669219">民粹主义和民粹政治是什么？</a></li>
<li><a href="http://www.zhihu.com/question/21053772">精英主义的最大问题在哪里？</a></li>
</ul>
<h2 id="投票考试">投票考试</h2>
<p>就投票权这一点来说，这两种主义就相当于两个极端：一个是认为选票控制在精英手里，一个是认为 人人有选票。我希望选票最终是要受到限制的，但是这个限制在公平与效益最大化的前提下做到最小。</p>
<p>一个可能的解决方案，就是进行 voter’s test。就好像高考一样，诚然每个人都应该享有教育权， 但是在现实资源的限制下，我们必须用考试这种<em>相对公平</em>的方法来保证我们的资源要用在对的人 身上，对于参考者来说，也算是进行了投入，付出了机会成本，并且能认识到这个权利是要争取回来的。 同时，这个考试，也保证了投票者具有基本的知识修养。另外打一个比方，就是人人都可以享有路权（投票权）， 但是要真正在马路上开车行驶（行使投票权），就必须对他人负责，通过考试来证明自己有资格使用这条路 并且不会影响他人的生命安全（投票时做出理性选择）。这里有篇<a href="http://chit-philosophy.blogspot.com/2012/08/blog-post_20.html">文章</a>与我观点类似。</p>
<p>这不是一个新的 idea，事实上，美国以前为了限制黑人投票，的确也实行过类似的考试。但那并不是说 这个制度就行不通，只是当时它被 abuse 了。这个考试必须是公平的，比如我们不设任何年龄与学历限制。这篇<a href="http://uspolitics.about.com/od/Voting/a/Should-Voters-Have-To-Pass-A-Test.htm">文章</a>介绍了一些背景，里面提到了一些支持 voter’s test 的<a href="http://www.latimes.com/opinion/opinion-la/la-oe-goldberg31jul31-column.html">人</a>。当然，我再次认识到这只是自己的主观认识，而且没有经过大量的背景阅读，所以很可能 这个制度会有更深层的问题。日后我会继续就这个 topic 展开讨论。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Notes on Maximum Likelihood, Maximum A Posteriori and Naive Bayes]]></title>
    <link href="http://blog.ivansiu.com/blog/2014/09/24/notes-on-maximum-likelihood/"/>
    <updated>2014-09-24T13:41:44-07:00</updated>
    <id>http://blog.ivansiu.com/blog/2014/09/24/notes-on-maximum-likelihood</id>
    <content type="html"><![CDATA[<p>Let <span class="math inline">\(\data\)</span> be a set of data generated from some distribution parameterized by <span class="math inline">\(\theta\)</span>. We want to <em>estimate</em> the unknown parameter <span class="math inline">\(\theta\)</span>. What we can do?</p>
<!-- more -->
<p>Essentially, we want to find a most likely value of <span class="math inline">\(\theta\)</span> given <span class="math inline">\(\data\)</span>, that is <span class="math inline">\(\arg \max P(\theta | \data)\)</span>. According to Bayes Rule, we have</p>
<p><span class="math display">\[
P(\theta \given \data) = \frac{P(\data \given \theta)P(\theta)}{P(\data)}
\]</span></p>
<p>and the terms have the following meanings:</p>
<ul>
<li><span class="math inline">\(P(\theta \given \data)\)</span>: Posterior</li>
<li><span class="math inline">\(P(\data \given \theta)\)</span>: Likelihood</li>
<li><span class="math inline">\(P(\theta)\)</span>: Prior</li>
<li><span class="math inline">\(P(\data)\)</span>: Evidence</li>
</ul>
<h2 id="maximum-likelihood-estimation-mle">Maximum Likelihood Estimation (MLE)</h2>
<p>An easy way out is to use the MLE method. We want to find a <span class="math inline">\(\theta\)</span> the <em>best explains</em> the data. That is, we maximize <span class="math inline">\(P(\data \given \theta)\)</span>. Denote such a value as <span class="math inline">\(\hat{\theta}_{ML}\)</span>. We have</p>
<p><span class="math display">\[
\hat{\theta}_{ML} = \argmax_\theta P(\data \given \theta) =
\argmax_\theta P(\mathbf{x}_1, \ldots, \mathbf{x}_N \given \theta )
\]</span></p>
<p>Note that the above <span class="math inline">\(P\)</span> is a joint distribution over the data. We usually assume the observations are <em>independent</em>. Thus, we have</p>
<p><span class="math display">\[
P(\mathbf{x}_1, \ldots, \mathbf{x}_N \given \theta ) =
\prod_{i=1}^{N} P(\mathbf{x}_i \given \theta )
\]</span></p>
<p>We usually use logarithm to simplify the computation, as logarithm is monotonically increasing. Thus, we write:</p>
<p><span class="math display">\[
\mathcal{L}(\data \given \theta) = \sum_{i=1}^N \log P(\mathbf{x}_i \given \theta )
\]</span></p>
<p>Finally, we seek for the ML solution:</p>
<p><span class="math display">\[
\hat{\theta}_{ML} = \argmax_\theta \mathcal{L}(\data \given \theta)
\]</span></p>
<p>If we know the distribution <span class="math inline">\(P\)</span>, we can usually solve the above by setting derivative of <span class="math inline">\(\theta\)</span> to 0 and solve for <span class="math inline">\(\theta\)</span>, that is,</p>
<p><span class="math display">\[
\frac{\partial L}{\partial \theta} = 0
\]</span></p>
<h2 id="maximum-a-posteriori-map">Maximum A Posteriori (MAP)</h2>
<p>In MAP, we maximize <span class="math inline">\(P(\theta \given \data)\)</span> directly. Denote the MAP hypothesis as <span class="math inline">\(\hat{\theta}_{MAP}\)</span>, we have:</p>
<p><span class="math display">\[\begin{array}{rl}
\hat{\theta}_{MAP} = &amp; \argmax_\theta P(\theta \given \data) \\\\
 = &amp; \argmax_\theta \frac{P(\data \given \theta)P(\theta)}{P(\data)} \\\\
 = &amp; \argmax_\theta P(\data \given \theta)P(\theta)
\end{array}\]</span></p>
<p>Note that the last step is due to the evidence (data) <span class="math inline">\(\data\)</span> is constant, and thus can be omitted in <span class="math inline">\(\argmax\)</span>.</p>
<p>At this step, we notice that the only difference between <span class="math inline">\(\hat{\theta}_{ML}\)</span> and <span class="math inline">\(\hat{\theta}_{MAP}\)</span> is the prior term <span class="math inline">\(P(\theta)\)</span>. Another way to interpret is that we consider <span class="math inline">\(MAP\)</span> is more general than <span class="math inline">\(MLE\)</span>, as if we assume all the possible <span class="math inline">\(\theta\)</span> are equally probable a priori, e.g., they have the same prior probability, or <em>uniform prior</em>, we can effectively remove <span class="math inline">\(P(\theta)\)</span> from the MAP formula, and it looks like exactly the same as MLE.</p>
<p>Finally, if the independent observation holds, again we can use logarithm and expand <span class="math inline">\(\hat{\theta}_{MAP}\)</span> as:</p>
<p><span class="math display">\[
\begin{array}{rl}
\hat{\theta}_{MAP} = &amp; \argmax_\theta L(\data \given \theta) \\\\
 = &amp; \argmax_\theta \sum_{i=1}^{N} \log P(\mathbf{x}_i \given \theta ) + \log P(\theta)
\end{array}
\]</span></p>
<p>The extra prior term has the effect that we are essentially ‘pulling’ the <span class="math inline">\(\theta\)</span> distribution towards prior value. This makes sense as we are putting our domain knowledge as <em>prior</em> and intuitively the estimation is biased towards the <em>prior</em> value.</p>
<h2 id="naive-bayes-classifier">Naive Bayes Classifier</h2>
<p>Assume that we are given a set of data <span class="math inline">\(\data\)</span>, where each example <span class="math inline">\(\mathbf{x_j}=(a_1, a_2, \ldots, a_n)\)</span>, which can be viewed as <em>conjunctions of attributes values</em>. <span class="math inline">\(v_j \in V\)</span> is the corresponding class value. Using MAP, we can classify an example <span class="math inline">\(\mathbf{x}\)</span> as:</p>
<p><span class="math display">\[v_{MAP}=\argmax_{v_j\in V} P(v_j \given a_1, \ldots, a_n)\]</span></p>
<p>The problem is that it is hard to find a joint distribution for <span class="math inline">\(P(\mathbf{x} \given \theta)\)</span>. If we use the data to estimate the distribution, we typically don’t have enough data for each attribute. In other words, the data we have is very sparse compared to the whole distribution space.</p>
<p>Naive bayes makes the assumption that each attribute is <em>conditionally independent</em> given the target class <span class="math inline">\(v_j\)</span>, that is,</p>
<p><span class="math display">\[P(a_1, \ldots, a_n \given v_j) = \prod_{i=1}^n P(a_i \given v_j)\]</span></p>
<p>which can be easily estimated from the data. Thus, we have the following naive bayes classifier:</p>
<p><span class="math display">\[v_{NB} = \argmax_{v_j \in V} P(v_j) \prod_{i=1}^n P(a_i \given v_j)\]</span></p>
<p>Note that the learning of naive bayes simply involves in estimating <span class="math inline">\(P(a_i \given v_j)\)</span> and <span class="math inline">\(P(v_j)\)</span> based on the frequencies in the training data.</p>
<p>Normally the conditional independence assumption does not hold, but naive bayes performs well even if so. More importantly, <strong>when conditional independence is satisfied, Naive Bayes corresponds to MAP classification.</strong></p>
<h2 id="conclusion">Conclusion</h2>
<p>MLE, MAP and Naive Bayes are all connected. While MLE and MAP are parameter estimation methods that returns a single value of the paramter being estimated, NB is a classifier that predicts the probability of the class that an example belongs to. We also have the following insightes:</p>
<ul>
<li>Given the data, MLE considers the paramter to be a constant and estimates a value that provide maximum support for the data.</li>
<li>MLE does not allow us to ‘inject’ our beliefs about the likely values for the parameter (prior) in the estimation process.</li>
<li>MAP allows the fact that the paramter can take values from a prior (non-uniform) distribution that express our prior beliefs regarding the paramters.</li>
<li>MAP returns paramter value where the probability is highest given data.</li>
<li>Again, both MLE and MAP returns a single and specific value for the paramter. By contrast, <em>bayesian estimation</em> computes the full posterior distribution <span class="math inline">\(P(\theta \given \data)\)</span>.</li>
</ul>
<h2 id="thoughts">Thoughts</h2>
<p>After reading this <a href="http://www.behind-the-enemy-lines.com/2008/01/are-you-bayesian-or-frequentist-or.html">article</a>, I have the following interpretation:</p>
<ul>
<li>The Maximum Likelihood approach can be roughly regarded as traditional “frequentist” thinking.</li>
<li>The MAP approach is a direct applicatin of Bayes Theorem. Thus, it can be regarded as a “bayesian” way of thinking.</li>
</ul>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Fix Mid 2009 MBP RAM not recognized issue]]></title>
    <link href="http://blog.ivansiu.com/blog/2014/05/28/fix-mid-2009-mbp-ram-not-recognized-issue/"/>
    <updated>2014-05-28T21:30:56-07:00</updated>
    <id>http://blog.ivansiu.com/blog/2014/05/28/fix-mid-2009-mbp-ram-not-recognized-issue</id>
    <content type="html"><![CDATA[<figure>
<img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/fix-mbp/mbp09-ram-theory.png" alt="Possible cause of unrecoganized RAM" /><figcaption>Possible cause of unrecoganized RAM</figcaption>
</figure>
<p>A few days ago, I encountered an issue which seems to be common among mid-2009 MBPs: one of the RAM (in slot 1) is not recognized anymore. Or, sometimes it is recognized, but after sleep and wake up, the computer freezes and impossible to recover but force power off.</p>
<!-- more -->
<p>It turns out this is a common issue in this model. See the discussion in this <a href="https://discussions.apple.com/message/25788934?ac_cid=tw123456#25788934">thread</a> and this <a href="https://discussions.apple.com/thread/4263981?start=30&amp;tstart=0">thread</a>. In the following, I am going to present my temporary fix for this problem. For those of you that still want to stick to the old MBP, the fix shall last for a while. But I do recomend you backup all the files and prepare to migrate some day soon.</p>
<p>As I suggested in <a href="https://discussions.apple.com/message/24868689#24868689">my reply</a>, this may due to a RAM slot degradation. My guess is, the RAM slot cannot align the RAM to a correct contact positions any more. Precisely, see the post image above. Notice that the two clips on the left and right are used to hold the rams in a horizontal position, otherwise they will bend upwards. I took a close look at those clips and found that the plastic wore out and cannot hold them as original. I don’t have great ways to fix them, so I just cropped some papers and insert them between the RAMs and the back edges on the body, hoping they can help tucking the RAMs.</p>
<p>As I am fixing it, I accidentally broke the left holder. So I have to customized a plastic holder and stuck it with the logic board to hold the inner ram (slot 1).</p>
<figure>
<img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/fix-mbp/cracked-holder.jpg" />
</figure>
<p>To verify my theory, I then taped a padding at the corresponding RAM position in the back cover:</p>
<figure>
<img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/fix-mbp/padding.jpg" />
</figure>
<p>And they look like the following before I close:</p>
<figure>
<img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/fix-mbp/padding-ram.jpg" />
</figure>
<p>Note that you have to screw it real tight to create the pressure such that the RAM is aligned. That said, there will be a ‘bump’ at that position, and will easily cause scratch. So I use an apple sticker to cover my ass:</p>
<figure>
<img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/fix-mbp/sticker.jpg" />
</figure>
<p>This method worked for me, well, at 99% of the time. Sometimes after sleep, the MBP still won’t wake up. I notice that this usually due to running the MBP for a long time, and it’s hot inside. Nevertheless, this is the best solution I can come up with by now. <em>If you have any other cheap solution that does not require replacing the logic board, please let me know in the comments.</em></p>
<p>Finally, Zach Clawson created a <a href="https://people.cam.cornell.edu/~zc227/extras/mid2009mbp_RAM.html">dedicated page</a> for this issue, which lists lots of reference and provides explanation to it. Make sure you check it out if you have encountered similar issue.</p>
<hr />
<p>There are other common issues for this model, and they can be easily fixed. See my following posts:</p>
<ul>
<li><a href="http://blog.ivansiu.com/blog/2013/11/08/saving-80-dollars-by-fixing-magsafe-by-yourself/">Fix frayed Magsafe cable</a></li>
<li><a href="http://blog.ivansiu.com/blog/2014/05/28/replacing-sata-cable-in-mid-2009-mbp/">Replace faulty SATA cable</a></li>
</ul>
<p><em>If you have similar experience, do not hesitate to let me know. If you find my instruction helpful, leave a comment and share it!</em></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Replacing SATA cable in Mid 2009 MBP]]></title>
    <link href="http://blog.ivansiu.com/blog/2014/05/28/replacing-sata-cable-in-mid-2009-mbp/"/>
    <updated>2014-05-28T00:15:08-07:00</updated>
    <id>http://blog.ivansiu.com/blog/2014/05/28/replacing-sata-cable-in-mid-2009-mbp</id>
    <content type="html"><![CDATA[<figure>
<img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/fix-mbp/sata-cable.jpg" alt="Replacing MBP cable" /><figcaption>Replacing MBP cable</figcaption>
</figure>
<p>Recently, my mid 2009 MBP (Model A1278) fails to recognize the hard drive. My first bet was another disk failure on me, but it was not the case. I took down the hard drive and put it to a mobile hard drive case and it can be read smoothly.</p>
<!-- more -->
<p>It turns out that it is due to the SATA cable fault, which is a notorious problem for mid 2009 MBP model. See the threads and discussions <a href="http://forums.macrumors.com/showthread.php?t=1031577">here</a>, <a href="http://www.ifixit.com/Answers/View/36360/Internal+hard+drive+disk+not+recognized">here</a>, <a href="http://www.ifixit.com/Answers/View/43072/Hard+Drive+not+recognized+by+system+during+boot+or+install">here</a> and <a href="https://discussions.apple.com/message/25454809#25454809">here</a>.</p>
<p>Luckily, the solution is simple, just go ahead and purchase a <a href="http://www.ifixit.com/MacBook-Parts/MacBook-Pro-13-Inch-Unibody-Hard-Drive-Cable/IF163-013#productDescription">replacement cable</a> and replace it. iFixit has a very detailed <a href="http://www.ifixit.com/Guide/MacBook+Pro+13-Inch+Unibody+Mid+2009+Hard+Drive+Cable+Replacement/1340">illustrated document</a> on the procedures. However, Amazon has a <a href="cable%20amazon">cheaper option</a>, and it works fine for me. I didn’t test the infra-red though, since I never and not plan to use it.</p>
<p>There are other common issues for this model, and they can be easily fixed. See my following posts:</p>
<ul>
<li><a href="http://blog.ivansiu.com/blog/2013/11/08/saving-80-dollars-by-fixing-magsafe-by-yourself/">Fix frayed Magsafe cable</a></li>
<li><a href="http://blog.ivansiu.com/blog/2014/05/28/fix-mid-2009-mbp-ram-not-recognized-issue/">Fix unrecognized RAM</a></li>
</ul>
<p><em>If you have similar experience, do not hesitate to let me know. If you find my instruction helpful, leave a comment and share it!</em></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[My Octopress Blogging Flow]]></title>
    <link href="http://blog.ivansiu.com/blog/2014/05/22/my-octopress-blogging-flow/"/>
    <updated>2014-05-22T20:38:07-07:00</updated>
    <id>http://blog.ivansiu.com/blog/2014/05/22/my-octopress-blogging-flow</id>
    <content type="html"><![CDATA[<figure>
<img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/octopress-flow/sublime-marked.png" alt="Writing in Sublime Text and previewing in Marked" /><figcaption>Writing in Sublime Text and previewing in Marked</figcaption>
</figure>
<p>After blogging with <a href="http://octopress.org">Octopress</a> for a while, I have already gained some insights on it, and my publishing flow has been smoother. I think it is right time to share my flow as a reference.</p>
<!-- more -->
<h2 id="the-flow">The Flow</h2>
<p>The following sections outlines the flow. The last section contains assorted tips and tricks. For the basic configuration of Octopress, please refer to the official <a href="http://octopress.org">website</a>. I also recommend installing <a href="http://www.alfredapp.com">Alfred.app</a>.</p>
<h3 id="creating-a-post-alfred-workflow-blog-publish">Creating a post: alfred workflow (blog publish)</h3>
<p><a href="https://github.com/temikus">Artem Yakimenko</a> created an awesome <a href="http://www.alfredforum.com/topic/2289-octopress-publisher/">alfred workflow</a> for publishing and generating octopress websites. Use <code>blog publish [title]</code> to create a new post:</p>
<figure>
<img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/octopress-flow/blog-publish.png" />
</figure>
<p>It then opens the post in your specified text editor with template.</p>
<h3 id="editing-sublime-text.app-marked.app-marked-app-menu-st-plugin">Editing: Sublime Text.app + Marked.app + Marked App Menu (ST Plugin)</h3>
<p>I use <a href="http://www.sublimetext.com">Sublime Text (ST)</a> as my text editor, because it provides VIM keybinding and there is a huge repository of plugins. While editing, I use [Marked] to instantly render the markdown file and view the result. In fact, the title image shows my editing and previewing in action.</p>
<p>To make the process sweeter, there is a ST plugin called <code>Marked App Menu</code> that allows you to open the current file in Marked. Just search in ST Package Control to install it.</p>
<h3 id="previewing-pow-rake-watch-pow-alfred-workflow">Previewing: pow + rake watch + pow alfred workflow</h3>
<p>To preview the generate website, simply install <a href="http://pow.cx">pow</a> and execute <code>rake watch</code> under octopress directory to monitor the change. Octopress official website provides <a href="http://octopress.org/docs/blogging/">some explanation</a>. After installation, you can view your website locally at <a href="http://octopress.dev" class="uri">http://octopress.dev</a>.</p>
<p>You should also install the <a href="http://tombeynon.github.io/alfred-pow/">pow alfred workflow</a>, which can help you open pow website in a breeze.</p>
<figure>
<img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/octopress-flow/pow.png" />
</figure>
<h3 id="math-rendering-mathjax">Math Rendering: MathJax</h3>
<p>Since I am an EECS student, I write a lot of <a href="http://blog.ivansiu.com/blog/categories/optimization">Optimization</a>, <a href="http://blog.ivansiu.com/blog/categories/machine-learning">Machine Learning</a> and <a href="http://blog.ivansiu.com/blog/categories/computer-vision">Computer Vision</a> stuff, which relies heavily on mathematics. Thus, writing math formulas is a must for me. <a href="http://mathjax.org">MathJax</a> is a javascript library for rendering math by writing LaTeX math. To do this, one needs to configure the site and link to the library. Put these two lines into <code>&lt;octopress&gt;/source/_includes/custom/head.html</code>:</p>
<div class="bogus-wrapper">
<notextile>
<figure class="code">
<figcaption>
<span></span>
</figcaption>
<div class="highlight">
<table>
<tr>
<td class="gutter">
<pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre>
</td>
<td class="code">
<pre><code class='html'><span class='line'><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span>
</span><span class='line'>  <span class="na">src=</span><span class="s">&quot;http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;/javascripts/MathJaxLocal.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span></code></pre>
</td>
</tr>
</table>
</div>
</figure>
</notextile>
</div>
<p>The first script block loads MathJax, and the second loads a custom configuration in <code>source/javascripts/MathJaxLocal.js</code>. It is a good place to write your own macro there. For instance:</p>
<div class="bogus-wrapper">
<notextile>
<figure class="code">
<figcaption>
<span></span>
</figcaption>
<div class="highlight">
<table>
<tr>
<td class="gutter">
<pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre>
</td>
<td class="code">
<pre><code class='javascript'><span class='line'><span class="nx">MathJax</span><span class="p">.</span><span class="nx">Hub</span><span class="p">.</span><span class="nx">Config</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">TeX</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">equationNumbers</span><span class="o">:</span> <span class="p">{</span> <span class="nx">autoNumber</span><span class="o">:</span> <span class="s2">&quot;AMS&quot;</span> <span class="p">},</span>
</span><span class='line'>      <span class="nx">TagSide</span><span class="o">:</span> <span class="s2">&quot;left&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">Macros</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">reals</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;\\mathbb{R}&#39;</span><span class="p">],</span>
</span><span class='line'>          <span class="nx">complex</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;\\mathbb{C}&#39;</span><span class="p">],</span>
</span><span class='line'>          <span class="nx">norm</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;\\left\\lVert#1\\right\\rVert&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
</span><span class='line'>          <span class="nx">given</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;\\:#1\\vert\\:&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
</span><span class='line'>          <span class="nx">data</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;\\mathcal{D}&#39;</span><span class="p">],</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="nx">MathJax</span><span class="p">.</span><span class="nx">Ajax</span><span class="p">.</span><span class="nx">loadComplete</span><span class="p">(</span><span class="s2">&quot;/javascripts/MathJaxLocal.js&quot;</span><span class="p">);</span>
</span></code></pre>
</td>
</tr>
</table>
</div>
</figure>
</notextile>
</div>
<p>Now you can write math!</p>
<p><span class="math display">\[e^{i \pi} + 1 = 0\]</span></p>
<p>There are a couple of good articles for reference:</p>
<ol type="1">
<li><a href="http://drz.ac/2013/01/03/blogging-with-math/">Blogging With Math: Octopress, MathJax, and Pandoc</a></li>
<li><a href="http://www.idryman.org/blog/2012/03/10/writing-math-equations-on-octopress/">Writing Math Equations on Octopress</a></li>
<li><a href="http://blog.zhengdong.me/2012/12/19/latex-math-in-octopress">LaTeX Math in Octopress</a></li>
</ol>
<h3 id="image-hosting-dropbox-public-folder">Image hosting: Dropbox public folder</h3>
<p>I host my images in Dropbox Public folder, since you can simply copy the public link and paste it to the post source, for example:</p>
<figure>
<img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/octopress-flow/dropbox-image.png" />
</figure>
<h3 id="image-editing-skitch-omnigraffle">Image editing: Skitch + OmniGraffle</h3>
<p>The previous image is done by a timed capture from <a href="http://skitch.com">skitch</a>. For advanced vector graphics, I use <a href="http://www.omnigroup.com/omnigraffle">OmniGraffle</a>.</p>
<h3 id="markdown-converter-pandoc">Markdown converter: pandoc</h3>
<p><a href="http://johnmacfarlane.net/pandoc/index.html">Pandoc</a> is a swiss-army knife like tool that convert documents in multiple formats to several dozens of output formats. I mainly use it as the markdown converter for Octopress. A <a href="https://github.com/dsanson/jekyll-pandoc-plugin">plugin</a> can help you with that.</p>
<p>After installation, I update the <code>markdown</code> section of <code>_config.yml</code> with the following:</p>
<div class="bogus-wrapper">
<notextile>
<figure class="code">
<figcaption>
<span></span>
</figcaption>
<div class="highlight">
<table>
<tr>
<td class="gutter">
<pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre>
</td>
<td class="code">
<pre><code class='yaml'><span class='line'><span class="l-Scalar-Plain">markdown</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">pandoc</span>
</span><span class='line'><span class="l-Scalar-Plain">pandoc</span><span class="p-Indicator">:</span>
</span><span class='line'>  <span class="l-Scalar-Plain">format</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">html5</span>
</span><span class='line'>  <span class="l-Scalar-Plain">extensions</span><span class="p-Indicator">:</span>
</span><span class='line'>    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">smart</span>
</span><span class='line'>    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">mathjax</span>
</span><span class='line'>    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">bibliography</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">source/blog.bib</span>
</span><span class='line'>    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">csl</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">_style/ieee.csl</span>
</span></code></pre>
</td>
</tr>
</table>
</div>
</figure>
</notextile>
</div>
<p>which tells Octopress to use pandoc, and pass the option <code>smart</code>, <code>mathjax</code> and use the <em>style file</em> <code>ieee.csl</code> to format the <em>biliography</em> <code>blog.bib</code>. For example, <code>refer to [@xiao2013optimally]</code> generates <em>refer to <span class="citation" data-cites="xiao2013optimally">[[1]]</span></em> (scroll down to see the <a href="#references">References</a> section).</p>
<h3 id="pandocs-markdown-reference-dash.app-and-dash-alfred-workflow">Pandoc’s Markdown Reference: Dash.app and Dash alfred workflow</h3>
<p><a href="http://kapeli.com/dash">Dash.app</a> is an API Documentation Browser and Code Snippet Manager. It provides an convinient alfred workflow that searches the documents:</p>
<figure>
<img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/octopress-flow/alfred-dash.png" />
</figure>
<p>opens</p>
<figure>
<img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/octopress-flow/Dash.png" />
</figure>
<h3 id="tips-and-tricks">Tips and tricks</h3>
<p>Continuously growing…</p>
<ul>
<li>There are lots of undocumented/less documented things in Octopress, which can help you write blog posts kinda ‘programmatically’. For example, <code>http://blog.ivansiu.com</code> returns the url of site, which is <a href="http://blog.ivansiu.com" class="uri">http://blog.ivansiu.com</a> in my case. In fact, anything in <code>_config.yml</code> is a variable under <code>site</code>.</li>
</ul>
<h2 id="conclusion">Conclusion</h2>
<p>In conclusion, Octopress is a revolutionary blogging framework. It provides a robust static site building framework (jekyll, bootstrap, scss, etc.) and allows complete control over the source, which is perfect for users that have basic coding and source control skills. In fact, it gives me a similar feeling of getting touch with a Mac. That is, compared to Windows, which is too close and does not provide built-in programming-friendly environment (Console, UNIX stuff, etc.), and compared to Linux, which is very open but too many variations and too many customizations needed, it combines their advantages by presenting a user- friendly interface and provides all sorts of underlying UNIX tools. I am very satisfied about this and my intention to write posts have revived. However, some sort of basic configuration is still needed. In particular, I would say Mathjax rendering and better image support definitely need to be integrated in the next release.</p>
<p><em>What’s your thought? Do you have any neat tricks publishing with <a href="http://octopress.org">Octopress</a>? Please leave your comments.</em></p>
<h2 id="references" class="unnumbered">References</h2>
<div id="refs" class="references">
<div id="ref-xiao2013optimally">
<p>[1] Z. Xiao, Y. Du, H. Tian, and M. D. Wong, “Optimally minimizing overlay violation in self-aligned double patterning decomposition for row-based standard cell layout in polynomial time,” in <em>Computer-aided design (iccad), 2013 ieee/acm international conference on</em>, 2013, pp. 32–39.</p>
</div>
</div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Sparse Image Reconstruction via L1-minimization]]></title>
    <link href="http://blog.ivansiu.com/blog/2014/05/19/sparse-image-reconstruction-via-l1-minimization/"/>
    <updated>2014-05-19T13:12:36-07:00</updated>
    <id>http://blog.ivansiu.com/blog/2014/05/19/sparse-image-reconstruction-via-l1-minimization</id>
    <content type="html"><![CDATA[<table>
<tbody>
<tr class="odd">
<td style="text-align: center;"><img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/l1/phantom_orig.png" alt="phantom_orig" /></td>
<td style="text-align: center;"><img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/l1/phantom_backproj.png" alt="phantom_backproj" /></td>
<td style="text-align: center;"><img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/l1/phantom_tv.png" alt="phantom_tv" /></td>
</tr>
<tr class="even">
<td style="text-align: center;">Original</td>
<td style="text-align: center;">Minimum Energy Reconstruction</td>
<td style="text-align: center;">Sparse Reconstruction</td>
</tr>
</tbody>
</table>
<h2 id="introduction">Introduction</h2>
<p>This is a follow up of the L1-minimization series. The previous two posts are:</p>
<ol type="1">
<li><a href="http://blog.ivansiu.com/blog/2014/05/14/a-comparison-of-least-square-l2-regularization-and-l1-regularization/">A Comparison of Least Square, L2-regularization and L1-regularization</a></li>
<li><a href="http://blog.ivansiu.com/blog/2014/05/18/sparse-signal-reconstruction-via-l1-minimization/">Sparse Signal Reconstruction via L1-minimization</a> <!-- more --></li>
</ol>
<p>We have explored using L1-minimization technique to <a href="http://blog.ivansiu.com/blog/2014/05/18/sparse-signal-reconstruction-via-l1-minimization/">recover a sparse signal</a>. The example shows a 1D example. This post demonsrates on a 2D example, where the image is viewed as a signal. This makes sense as we can perform 2D Fourier Transform in the image, where the basis are a combination of <em>horizontal</em> and <em>vertical</em> waves. For a complete introduction to FFT on images, refer to <a href="http://www.cs.unm.edu/~brayer/vision/fourier.html">this tutorial</a>. Notice that similar to 1D signal, we do not measure the image directly in time domain, but we do it in the frequency domain. Concretely, say <span class="math inline">\(x\)</span> is the 2D image collapsed to 1D, and <span class="math inline">\(A \in \reals^{k\times n}\)</span> is the measurement matrix, <span class="math inline">\(b\)</span> is the observation, we then have <span class="math inline">\(Ax=b\)</span>. Usually we will require <span class="math inline">\(k = n\)</span> to obtain an exact solution for <span class="math inline">\(x\)</span> given <span class="math inline">\(A\)</span> and <span class="math inline">\(b\)</span>. Now, if we use FFT and obtain the frequency coefficients as <span class="math inline">\(\hat{x}\)</span>, we can also perform similar measurements <span class="math inline">\(\hat{A} \hat{x} = \hat{b}\)</span>, and the requirement <span class="math inline">\(k = n\)</span> is the same. In other words, the required samples (the information) is <em>the same</em>. By using the inverse fourier transform, we can convert <span class="math inline">\(\hat{x}\)</span> back to <span class="math inline">\(x\)</span>. The only difference is that the measurement <span class="math inline">\(\hat{A}\)</span> is taken in frequency (Fourier) domain. As we can see later, we can utilize sparse information to reduce <span class="math inline">\(k\)</span>.</p>
<h2 id="image-gradients-and-total-variation">Image Gradients and Total Variation</h2>
<p>We first introduct the concept of image gradients. For any 2D real image <code>I</code>, if we think about each row as a signal, we can then view the ‘difference’ between adjacent pixels as (horizontal) gradient <code>Gx(I)</code>, this makes sense since a sharpe change denotes an edge. Similary, we can define the vertical gradient <code>Gy(I)</code> for columns. Thus, we have</p>
<p><span class="math display">\[Gx(I) = \begin{cases}
I_{i+1, j} - I_{ij} &amp; i &lt; n \\\\ 0 &amp; i = n
\end{cases}
\qquad
Gy(I) = \begin{cases}
I_{i, j+1} - I_{ij} &amp; j &lt; n \\\\ 0 &amp; j = n
\end{cases}\]</span></p>
<p>where the image size is <span class="math inline">\(n\times n\)</span>.</p>
<p>Collectively, the image gradient <code>G(I)</code> is defined as the magnitude (2-norm) of both components:</p>
<p><span class="math display">\[G(I)_{ij} = \sqrt{(Gx(I)_{ij})^2 + (Gy(I)_{ij})^2}\]</span></p>
<p>The following shows <code>Gx</code>, <code>Gy</code> and <code>G</code> of the phantom image:</p>
<table>
<tbody>
<tr class="odd">
<td style="text-align: center;"><img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/l1/phantom_gx.png" alt="phantom_gx" /></td>
<td style="text-align: center;"><img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/l1/phantom_gy.png" alt="phantom_gy" /></td>
<td style="text-align: center;"><img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/l1/phantom_gI.png" alt="phantom_gI" /></td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>Gx(I)</code></td>
<td style="text-align: center;"><code>Gy(I)</code></td>
<td style="text-align: center;"><code>G(I)</code></td>
</tr>
</tbody>
</table>
<p>The <em>total variation</em> <code>TV(I)</code> of an image is just the sum of this discrete gradient at every point.</p>
<p><span class="math display">\[TV(I)= \norm{G(I)}_1 = \sum_{i,j} G(I)_{ij}\]</span></p>
<p>We notice that <span class="math inline">\(TV(I)\)</span> is just the <em>L1-norm</em> of <span class="math inline">\(G(I)\)</span>, which leads us to the following: if we have an image that is sparse in its image gradients, we can exploit that and use our L1-minimization trick.</p>
<h2 id="sparse-gradient-image-reconstruction">Sparse Gradient Image Reconstruction</h2>
<p>The ratio of non-zero elements in <code>Gx</code>, <code>Gy</code> and <code>G</code> of the phantom image is <code>0.0711</code>, <code>0.0634</code> and <code>0.0769</code>, respectively. These ratios are really small - and we consider the gradient as <em>sparse</em>.</p>
<p>Let <span class="math inline">\(F: \reals^{n\times n} \to \complex^{n\times n}\)</span> be the FFT operator, and <span class="math inline">\(F I\)</span> be the Fourier transform taken on image I. Define a set <span class="math inline">\(\Omega\)</span> as the <span class="math inline">\(k\)</span> two-dimensional frequencies chosen according to some sampling pattern from the <span class="math inline">\(n \times n\)</span>. We further define <span class="math inline">\(F_\Omega I: \reals^{n \times n} \to \complex^k\)</span> as the <span class="math inline">\(k\)</span> observation taken from the fourier transform of image I. We can then solve the following optimization problem to recover <span class="math inline">\(I\)</span>:</p>
<p><span class="math display">\[\min_I \norm{F_\Omega I - b}^2_2\]</span></p>
<p>where <span class="math inline">\(F_\Omega\)</span> can be view as the measurement matrix, <span class="math inline">\(b\)</span> is the observation, and we want to find <span class="math inline">\(I\)</span> such that the <em>reconstruction cost</em> (energy) is minimized.</p>
<p>However, the above does not quite work. As we can see in the following images, the <em>L2-minimization</em> does a poor job, either for a random measurement or a radial measurement <span class="citation" data-cites="candes2006robust">[[1]]</span> in Fourier domain.</p>
<table>
<tbody>
<tr class="odd">
<td style="text-align: center;"><img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/l1/measurement_random.png" alt="M rand" /></td>
<td style="text-align: center;"><img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/l1/phantom_rand_bp.png" alt="phantom rand bp" /></td>
<td style="text-align: center;"><img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/l1/phantom_rand_tv.png" alt="phantom rand tv" /></td>
</tr>
<tr class="even">
<td style="text-align: center;">Random measurement</td>
<td style="text-align: center;">L2-minimization</td>
<td style="text-align: center;">L1-minimization</td>
</tr>
</tbody>
</table>
<table>
<tbody>
<tr class="odd">
<td style="text-align: center;"><img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/l1/measurement_radial.png" alt="M radial" /></td>
<td style="text-align: center;"><img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/l1/phantom_backproj.png" alt="phantom_backproj" /></td>
<td style="text-align: center;"><img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/l1/phantom_tv.png" alt="phantom_tv" /></td>
</tr>
<tr class="even">
<td style="text-align: center;">Radial measurement</td>
<td style="text-align: center;">L2-minimization</td>
<td style="text-align: center;">L1-minimization</td>
</tr>
</tbody>
</table>
<p>To utilize the sparse information, we add a L1-regularization term to the above objective function, which yields the following:</p>
<p><span class="math display">\[(TV_1) \quad \min_I \norm{F_\Omega I - b}^2_2 + \lambda TV(I)\]</span></p>
<p>Without surprise, optimizing the above gives us a <em>perfect</em> reconstruction of the original image. It is shown that if there exists a piecewise constant I with sufficiently few edges (i.e., <span class="math inline">\(G(I)_{ij}\)</span> is nonzero for only a small number of indices i, j), then <span class="math inline">\((TV_1)\)</span> will recover I exactly.</p>
<p>A heavily commented code example is available in my <a href="https://github.com/iveney/l1min/blob/master/image_recovery_l1.m">github repository</a>. Leave a comment if you have any question.</p>
<h2 id="probing-further">Probing Further</h2>
<p>Now, take a look at another example <code>cameraman</code>, which has the following gradients (intensity rescaled using matlab’s <code>imagesc</code>.</p>
<table>
<tbody>
<tr class="odd">
<td style="text-align: center;"><img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/l1/cameraman.png" alt="cameraman" /></td>
<td style="text-align: center;"><img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/l1/cameraman_grad.png" alt="cameraman_grad" /></td>
</tr>
<tr class="even">
<td style="text-align: center;">Cameraman</td>
<td style="text-align: center;">Gradient</td>
</tr>
</tbody>
</table>
<p>The following shows the reconstructions (left two are using random measurements, right two are using radial measurements).</p>
<table>
<tbody>
<tr class="odd">
<td style="text-align: center;"><img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/l1/cameraman_rand_bp.png" alt="cameraman_rand_bp" /></td>
<td style="text-align: center;"><img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/l1/cameraman_rand_tv.png" alt="cameraman_rand_tv" /></td>
<td style="text-align: center;"><img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/l1/cameraman_bp.png" alt="cameraman_bp" /></td>
<td style="text-align: center;"><img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/l1/cameraman_tv.png" alt="cameraman_tv" /></td>
</tr>
<tr class="even">
<td style="text-align: center;">Rand (L2)</td>
<td style="text-align: center;">Rand (L1)</td>
<td style="text-align: center;">Radial (L2)</td>
<td style="text-align: center;">Radial (L1)</td>
</tr>
</tbody>
</table>
<p>As we can see, the results are not as good. In fact, the non-zero ratio of its gradient is 0.9928, which is not sparse at all. However, if we plot the histogram of gradients, we will find that most of the gradient magnitudes are small:</p>
<figure>
<img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/l1/camera_mag_hist.png" alt="Gradient Histogram" /><figcaption>Gradient Histogram</figcaption>
</figure>
<p>In particular, most of them are smaller than 200, which means the number of ‘changes’ that are larger than 200 is small. In fact, the ratio of gradient &gt; 200 is only <em>0.0964</em>! Thus, there are two possible ways to discard these information and get a ‘compressed’ image that is sparse in gradients:</p>
<ol type="1">
<li>Use mean-shift algorithm to segment the regions such that they have the same color intensities. K-means or quantization should achieve a similar result, though might not as good as mean-shift.</li>
<li>Use image filtering to smooth the image, which can effectively average colors and discard high frequency information.</li>
</ol>
<p><em>I’ll leave these conjectures for furture implementation. For those intereted, please try them yourself and let me know your results. If you have any thoughts, do not hesitate to leave a comment.</em></p>
<h2 id="references">References</h2>
<p>For interested readers, the following references will be helpful.</p>
<div id="refs" class="references">
<div id="ref-candes2006robust">
<p>[1] E. J. Candès, J. Romberg, and T. Tao, “Robust uncertainty principles: Exact signal reconstruction from highly incomplete frequency information,” <em>Information Theory, IEEE Transactions on</em>, vol. 52, no. 2, pp. 489–509, 2006.</p>
</div>
<div id="ref-candes2005l1">
<p>[2] E. Candes and J. Romberg, “L1-magic: Recovery of sparse signals via convex programming,” vol. 4, 2005.</p>
</div>
<div id="ref-hesthavensparse">
<p>[3] J. S. Hesthaven, K. Chowdhary, E. Walsh, and others, “Sparse gradient image reconstruction from incomplete fourier measurements and prior edge information,” <em>IEEE TRANSACTIONS ON IMAGE PROCESSING</em>, 2012.</p>
</div>
<div id="ref-pant2013new">
<p>[4] J. K. Pant, W.-S. Lu, and A. Antoniou, “A new algorithm for compressive sensing based on total-variation norm,” in <em>Circuits and systems (iscas), 2013 ieee international symposium on</em>, 2013, pp. 1352–1355.</p>
</div>
</div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Sparse Signal Reconstruction via L1-minimization]]></title>
    <link href="http://blog.ivansiu.com/blog/2014/05/18/sparse-signal-reconstruction-via-l1-minimization/"/>
    <updated>2014-05-18T20:13:08-07:00</updated>
    <id>http://blog.ivansiu.com/blog/2014/05/18/sparse-signal-reconstruction-via-l1-minimization</id>
    <content type="html"><![CDATA[<p><a href="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/l1/sparse_signal_reconstruction.png"><img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/l1/sparse_signal_reconstruction.png" alt="Sparse Signal Reconstruction Results" /></a></p>
<p>This is a follow-up of the <a href="http://blog.ivansiu.com/blog/2014/05/14/a-comparison-of-least-square-l2-regularization-and-l1-regularization/">previous post</a> on applications of L1 minimization.</p>
<!-- more -->
<p>As we know, any signal can be decomposed into a linear combination of basis, and the most famous one is <a href="http://en.wikipedia.org/wiki/Fourier_transform">Fourier Transform</a>. For simplicity, let’s assume that we have a signal that is a superposition of some sinusoids. For example, the following:</p>
<div class="bogus-wrapper">
<notextile>
<figure class="code">
<figcaption>
<span></span>
</figcaption>
<div class="highlight">
<table>
<tr>
<td class="gutter">
<pre class="line-numbers"><span class='line-number'>1</span>
</pre>
</td>
<td class="code">
<pre><code class='matlab'><span class='line'><span class="p">.</span><span class="mi">5</span><span class="o">*</span><span class="nb">sin</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="n">x</span><span class="p">)</span><span class="o">.*</span><span class="nb">cos</span><span class="p">(.</span><span class="mi">1</span><span class="o">*</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="nb">sin</span><span class="p">(</span><span class="mf">1.3</span><span class="o">*</span><span class="n">x</span><span class="p">)</span><span class="o">.*</span><span class="nb">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">-</span><span class="p">.</span><span class="mi">7</span><span class="o">*</span><span class="nb">sin</span><span class="p">(.</span><span class="mi">5</span><span class="o">*</span><span class="n">x</span><span class="p">)</span><span class="o">.*</span><span class="nb">cos</span><span class="p">(</span><span class="mf">2.3</span><span class="o">*</span><span class="n">x</span><span class="p">)</span><span class="o">.*</span><span class="nb">cos</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
</span></code></pre>
</td>
</tr>
</table>
</div>
</figure>
</notextile>
</div>
<p>With <em>discrete consine transform</em> (DCT), we can easily find the coefficients of corresponding sinusoid components. The above example’s coefficients (in frequency domain) and signal in time domain are shown in the post figure.</p>
<p>Now, let’s assume we do not know the signal and want to reconstruct it by sampling. Theorectically, the number of samples required is at least two times the signal frequency, according to the famous <a href="http://en.wikipedia.org/wiki/Nyquist–Shannon_sampling_theorem">Nyquist–Shannon sampling theorem</a>.</p>
<p>However, this assume zero-knowledge about the signal. If we know some structure of the signal, e.g., the DCT coefficients are sparse in our case, we can further reduce the number of samples required.<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a></p>
<p>The following code snippet demonstrates how this works. We generate the original signal in time domain and then perform a DCT to obtain the coefficients.</p>
<div class="bogus-wrapper">
<notextile>
<figure class="code">
<figcaption>
<span></span>
</figcaption>
<div class="highlight">
<table>
<tr>
<td class="gutter">
<pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre>
</td>
<td class="code">
<pre><code class='matlab'><span class='line'><span class="c">% sparse signal recovery using L1</span>
</span><span class='line'>
</span><span class='line'><span class="n">rng</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span><span class='line'><span class="n">N</span> <span class="p">=</span> <span class="mi">256</span><span class="p">;</span> <span class="n">R</span> <span class="p">=</span> <span class="mi">3</span><span class="p">;</span> <span class="n">C</span> <span class="p">=</span> <span class="mi">2</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c">% some superposition of sinoisoids, feel free to change and experiment</span>
</span><span class='line'><span class="n">f</span> <span class="p">=</span> <span class="p">@(</span><span class="n">x</span><span class="p">)</span> <span class="p">.</span><span class="mi">5</span><span class="o">*</span><span class="nb">sin</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="n">x</span><span class="p">)</span><span class="o">.*</span><span class="nb">cos</span><span class="p">(.</span><span class="mi">1</span><span class="o">*</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="nb">sin</span><span class="p">(</span><span class="mf">1.3</span><span class="o">*</span><span class="n">x</span><span class="p">)</span><span class="o">.*</span><span class="nb">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">-</span><span class="p">.</span><span class="mi">7</span><span class="o">*</span><span class="nb">sin</span><span class="p">(.</span><span class="mi">5</span><span class="o">*</span><span class="n">x</span><span class="p">)</span><span class="o">.*</span><span class="nb">cos</span><span class="p">(</span><span class="mf">2.3</span><span class="o">*</span><span class="n">x</span><span class="p">)</span><span class="o">.*</span><span class="nb">cos</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
</span><span class='line'><span class="n">x</span> <span class="p">=</span> <span class="nb">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="o">*</span><span class="nb">pi</span><span class="p">,</span> <span class="mi">10</span><span class="o">*</span><span class="nb">pi</span><span class="p">,</span> <span class="n">N</span><span class="p">);</span>
</span><span class='line'><span class="n">y</span> <span class="p">=</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="n">subplot</span><span class="p">(</span><span class="n">R</span><span class="p">,</span><span class="n">C</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
</span><span class='line'><span class="n">coef</span> <span class="p">=</span> <span class="n">dct</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="o">&#39;</span><span class="p">;</span>
</span><span class='line'><span class="n">stem</span><span class="p">(</span><span class="n">coef</span><span class="p">);</span>
</span><span class='line'><span class="n">xlim</span><span class="p">([</span><span class="mi">0</span> <span class="n">N</span><span class="p">]);</span> <span class="n">title</span><span class="p">(</span><span class="s">&#39;Original signal in frequency domain&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="n">subplot</span><span class="p">(</span><span class="n">R</span><span class="p">,</span><span class="n">C</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span>
</span><span class='line'><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">);</span>
</span><span class='line'><span class="n">xlim</span><span class="p">([</span><span class="n">min</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="n">max</span><span class="p">(</span><span class="n">x</span><span class="p">)]);</span> <span class="n">title</span><span class="p">(</span><span class="s">&#39;Original signal in time domain&#39;</span><span class="p">);</span>
</span></code></pre>
</td>
</tr>
</table>
</div>
</figure>
</notextile>
</div>
<p>Let’s assume that we have a device that can sample from the frequency domain. To do this, we create a <em>random measurement matrix</em> to obtain the samples. We use 80 samples here. Note that we normalize the measurement matrix to have orthonormal basis, i.e., the norm of each row is 1, and the dot product of different row is 0.</p>
<div class="bogus-wrapper">
<notextile>
<figure class="code">
<figcaption>
<span></span>
</figcaption>
<div class="highlight">
<table>
<tr>
<td class="gutter">
<pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre>
</td>
<td class="code">
<pre><code class='matlab'><span class='line'><span class="c">% measurement matrix</span>
</span><span class='line'><span class="n">K</span><span class="p">=</span><span class="mi">80</span><span class="p">;</span>
</span><span class='line'><span class="n">A</span><span class="p">=</span><span class="nb">randn</span><span class="p">(</span><span class="n">K</span><span class="p">,</span> <span class="n">N</span><span class="p">);</span>
</span><span class='line'><span class="n">A</span><span class="p">=</span><span class="n">orth</span><span class="p">(</span><span class="n">A</span><span class="o">&#39;</span><span class="p">)</span><span class="o">&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c">% observations</span>
</span><span class='line'><span class="n">b</span><span class="p">=</span><span class="n">A</span><span class="o">*</span><span class="n">coef</span><span class="p">;</span>
</span></code></pre>
</td>
</tr>
</table>
</div>
</figure>
</notextile>
</div>
<p>We first try a least-square approach, which boils down to inverse the matrix and obtain <span class="math inline">\(\hat{x}=A^{-1} b\)</span>. Note that as A is not square, we are using its <em>pseudo-inverse</em> here. Furthermore, as A is othornormal, its transpose is the same as pseudo-inverse.</p>
<div class="bogus-wrapper">
<notextile>
<figure class="code">
<figcaption>
<span></span>
</figcaption>
<div class="highlight">
<table>
<tr>
<td class="gutter">
<pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre>
</td>
<td class="code">
<pre><code class='matlab'><span class='line'><span class="c">% min-energy observations</span>
</span><span class='line'><span class="n">c0</span> <span class="p">=</span> <span class="n">A</span><span class="o">&#39;*</span><span class="n">b</span><span class="p">;</span> <span class="c">% A&#39; = pinv(A) here since A is a full-rank orthonormal matrix</span>
</span><span class='line'><span class="n">subplot</span><span class="p">(</span><span class="n">R</span><span class="p">,</span><span class="n">C</span><span class="p">,</span><span class="mi">3</span><span class="p">);</span>
</span><span class='line'><span class="n">stem</span><span class="p">(</span><span class="n">c0</span><span class="p">);</span>
</span><span class='line'><span class="n">xlim</span><span class="p">([</span><span class="mi">0</span> <span class="n">N</span><span class="p">]);</span> <span class="n">title</span><span class="p">(</span><span class="s">&#39;Minimum energy recovery - coef&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="n">subplot</span><span class="p">(</span><span class="n">R</span><span class="p">,</span><span class="n">C</span><span class="p">,</span><span class="mi">4</span><span class="p">);</span>
</span><span class='line'><span class="n">y0</span> <span class="p">=</span> <span class="n">idct</span><span class="p">(</span><span class="n">c0</span><span class="p">,</span> <span class="n">N</span><span class="p">);</span>
</span><span class='line'><span class="n">plot</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="n">N</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span><span class="s">&#39;r&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span><span class="n">N</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">);</span>
</span><span class='line'><span class="n">xlim</span><span class="p">([</span><span class="mi">0</span> <span class="n">N</span><span class="p">]);</span> <span class="n">title</span><span class="p">(</span><span class="s">&#39;Minimum energy recovery - signal&#39;</span><span class="p">);</span>
</span><span class='line'><span class="n">legend</span><span class="p">(</span><span class="s">&#39;Recovered&#39;</span><span class="p">,</span> <span class="s">&#39;Original&#39;</span><span class="p">);</span>
</span></code></pre>
</td>
</tr>
</table>
</div>
</figure>
</notextile>
</div>
<p>As we can see, there are lots of non-zeros in the coefficients, and the recovered signal is very different from the original signal.</p>
<p>Finally, we use L1-minimization for reconstruction. I used <code>lasso</code> to perform a L1-regualarized minimization. Another package that performs various L1-minimization is <a href="http://users.ece.gatech.edu/~justin/l1magic/">l1-magic</a>.</p>
<div class="bogus-wrapper">
<notextile>
<figure class="code">
<figcaption>
<span></span>
</figcaption>
<div class="highlight">
<table>
<tr>
<td class="gutter">
<pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre>
</td>
<td class="code">
<pre><code class='matlab'><span class='line'><span class="c">% L1-minimization</span>
</span><span class='line'><span class="p">[</span><span class="n">c1</span><span class="p">,</span> <span class="n">fitinfo</span><span class="p">]</span> <span class="p">=</span> <span class="n">lasso</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="s">&#39;Lambda&#39;</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">);</span>
</span><span class='line'><span class="c">% If use L1-magic</span>
</span><span class='line'><span class="c">% addpath /path/to/l1magic/Optimization</span>
</span><span class='line'><span class="c">% [c1] = l1eq_pd(c0, A, [], b, 1e-4);</span>
</span><span class='line'><span class="n">subplot</span><span class="p">(</span><span class="n">R</span><span class="p">,</span><span class="n">C</span><span class="p">,</span><span class="mi">5</span><span class="p">);</span>
</span><span class='line'><span class="n">stem</span><span class="p">(</span><span class="n">c1</span><span class="p">);</span>
</span><span class='line'><span class="n">xlim</span><span class="p">([</span><span class="mi">0</span> <span class="n">N</span><span class="p">]);</span> <span class="n">title</span><span class="p">(</span><span class="s">&#39;L1 recovery - coef&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="n">subplot</span><span class="p">(</span><span class="n">R</span><span class="p">,</span><span class="n">C</span><span class="p">,</span><span class="mi">6</span><span class="p">);</span>
</span><span class='line'><span class="n">y1</span> <span class="p">=</span> <span class="n">idct</span><span class="p">(</span><span class="n">c1</span><span class="p">,</span> <span class="n">N</span><span class="p">);</span>
</span><span class='line'><span class="n">plot</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="n">N</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span><span class="n">N</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">);</span>
</span><span class='line'><span class="n">xlim</span><span class="p">([</span><span class="mi">0</span> <span class="n">N</span><span class="p">]);</span> <span class="n">title</span><span class="p">(</span><span class="s">&#39;L1 recovery - signal&#39;</span><span class="p">);</span>
</span><span class='line'><span class="n">legend</span><span class="p">(</span><span class="s">&#39;Recovered&#39;</span><span class="p">,</span> <span class="s">&#39;Original&#39;</span><span class="p">);</span>
</span></code></pre>
</td>
</tr>
</table>
</div>
</figure>
</notextile>
</div>
<p>The above shows that L1-minimization successfully recovered the original signal. A complete code snippet can be found <a href="https://gist.github.com/842145ae48381a5a8dca">here</a>.</p>
<section class="footnotes">
<hr />
<ol>
<li id="fn1"><p>In order to recover f perfectly, we need at least <span class="math inline">\(B \log (N)\)</span> samples <a href="http://users.ece.gatech.edu/~justin/l1magic/downloads/papers/CandesRombergTao_revisedNov2005.pdf">(source)</a>.<a href="#fnref1">↩</a></p></li>
</ol>
</section>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[A Comparison of Least Square, L2-regularization and L1-regularization]]></title>
    <link href="http://blog.ivansiu.com/blog/2014/05/14/a-comparison-of-least-square-l2-regularization-and-l1-regularization/"/>
    <updated>2014-05-14T19:32:38-07:00</updated>
    <id>http://blog.ivansiu.com/blog/2014/05/14/a-comparison-of-least-square-l2-regularization-and-l1-regularization</id>
    <content type="html"><![CDATA[<figure>
<img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/2014-05-14-a-comparison-of-least-square-l2-regularization-and-l1-regularization/coef.png" alt="Recovered Coefficients by Different Methods" /><figcaption>Recovered Coefficients by Different Methods</figcaption>
</figure>
<h1 id="problem-setting">Problem Setting</h1>
<p>Ordinary Least Square (OLS), L2-regularization and L1-regularization are all techniques of finding solutions in a linear system. However, they serve for different purposes. Recently, L1-regularization gains much attention due to its ability in finding sparse solutions. This post demonstrates this by comparing OLS, L2 and L1 regularization.</p>
<!-- more -->
<p>Consider the following linear system:</p>
<p><span class="math display">\[Ax = y\]</span></p>
<p>where <span class="math inline">\(A \in \reals^{m \times n}\)</span>, <span class="math inline">\(m\)</span> is the number of rows (observations) and <span class="math inline">\(n\)</span> is the number of columns (variable dimension), <span class="math inline">\(x\)</span> is the variable coefficients and <span class="math inline">\(y\)</span> is the response. There are three cases to consider:</p>
<ol type="1">
<li><span class="math inline">\(m=n\)</span>. This is the common-seen case. If <span class="math inline">\(A\)</span> is not degenerate, the solution is unique.</li>
<li><span class="math inline">\(m&gt;n\)</span>. This is called <em>over-determined linear system</em>. There is usually <em>no</em> solutions, but an <em>approximation</em> can be easily found by minimizing the <em>residue cost</em> <span class="math inline">\(\norm{Ax-y}^2_2\)</span> using least square methods, and it has a nice closed-form solution <span class="math inline">\(x_{ls}=(A^T A)^{-1} A^T y\)</span>. In L2-regularization, we add a penalize term to minimize the 2-norm of the coefficients. Thus, the objective becomes: <span class="math display">\[\min_x \norm{Ax-y}^2_2 + \alpha \norm{x}_2\]</span> where <span class="math inline">\(\alpha\)</span> is a weight to decide the importance of the regularization.</li>
<li><span class="math inline">\(m&lt;n\)</span>. This is called <em>under-determined linear system</em>. There is usually no solution or infinite solutions. This is where it get interesting: when we have some prior knowledge in the solution structure, such as sparsity, we can have a ‘metric’ to find a better solution among a whole bunch. The objective is thus: <span class="math display">\[\min_x \norm{Ax-y}^2_2 + \alpha \norm{x}_1\]</span> The optimization technique for the above problem is called <a href="http://www-stat.stanford.edu/~tibs/lasso.html">lasso</a>, and there is an advanced version called <a href="http://en.wikipedia.org/wiki/Elastic_net_regularization">elastic net</a>, which <a href="http://scikit-learn.org/stable/modules/linear_model.html#elastic-net">combines the L2 and L1 regularization together</a>, hoping to get the advantages of both: L1 regularization finds sparse solution but introduces a large Mean Square Error (MSE) error, while L2 is better at minimizing MSE.</li>
</ol>
<h2 id="an-example">An Example</h2>
<p>In the following, we show their performances by solving a simple case.</p>
<div class="bogus-wrapper">
<notextile>
<figure class="code">
<figcaption>
<span>regression_ex.m</span>
</figcaption>
<div class="highlight">
<table>
<tr>
<td class="gutter">
<pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
</pre>
</td>
<td class="code">
<pre><code class='matlab'><span class='line'><span class="c">% Compare Ordinary Least square (no regularization), L2-reguarlized (Ridge),</span>
</span><span class='line'><span class="c">% L1-regualarized (Lasso) regression in finding the sparse coefficient</span>
</span><span class='line'><span class="c">% in a underdetermined linear system</span>
</span><span class='line'>
</span><span class='line'><span class="n">rng</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>  <span class="c">% for reproducibility</span>
</span><span class='line'><span class="n">m</span> <span class="p">=</span> <span class="mi">50</span><span class="p">;</span>  <span class="c">% num samples</span>
</span><span class='line'><span class="n">n</span> <span class="p">=</span> <span class="mi">200</span><span class="p">;</span> <span class="c">% num variables, note that n &gt; m</span>
</span><span class='line'>
</span><span class='line'><span class="n">A</span> <span class="p">=</span> <span class="nb">rand</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">n</span><span class="p">);</span>
</span><span class='line'><span class="n">x</span> <span class="p">=</span> <span class="nb">zeros</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span><span class='line'><span class="n">nz</span> <span class="p">=</span> <span class="mi">10</span><span class="p">;</span> <span class="c">% 10 non-zeros variables (sparse)</span>
</span><span class='line'><span class="n">nz_idx</span> <span class="p">=</span> <span class="n">randperm</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
</span><span class='line'><span class="n">x</span><span class="p">(</span><span class="n">nz_idx</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="n">nz</span><span class="p">))</span> <span class="p">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="nb">rand</span><span class="p">(</span><span class="n">nz</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span><span class='line'><span class="n">y</span> <span class="p">=</span> <span class="n">A</span><span class="o">*</span><span class="n">x</span><span class="p">;</span>
</span><span class='line'><span class="n">y</span> <span class="p">=</span> <span class="n">y</span> <span class="o">+</span> <span class="mf">0.05</span> <span class="o">*</span> <span class="nb">rand</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span> <span class="c">% add some noise</span>
</span><span class='line'>
</span><span class='line'><span class="c">% plot original x</span>
</span><span class='line'><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span><span class='line'><span class="n">bar</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">axis</span> <span class="n">tight</span><span class="p">;</span>
</span><span class='line'><span class="n">title</span><span class="p">(</span><span class="s">&#39;Original coefficients&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="c">% OLS</span>
</span><span class='line'><span class="n">x_ols</span> <span class="p">=</span> <span class="n">A</span> <span class="o">\</span> <span class="n">y</span><span class="p">;</span>
</span><span class='line'><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</span><span class='line'><span class="n">bar</span><span class="p">(</span><span class="n">x_ols</span><span class="p">),</span> <span class="n">axis</span> <span class="n">tight</span><span class="p">;</span>
</span><span class='line'><span class="n">title</span><span class="p">(</span><span class="s">&#39;Ordinary Least Square&#39;</span><span class="p">);</span>
</span><span class='line'><span class="n">y_ols</span> <span class="p">=</span> <span class="n">A</span> <span class="o">*</span> <span class="n">x_ols</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c">% L2 (Ridge) </span>
</span><span class='line'><span class="n">x_l2</span> <span class="p">=</span> <span class="n">ridge</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="mf">1e-5</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>  <span class="c">% last parameter = 00 to generate intercept term</span>
</span><span class='line'><span class="n">b_l2</span> <span class="p">=</span> <span class="n">x_l2</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span class='line'><span class="n">x_l2</span> <span class="p">=</span> <span class="n">x_l2</span><span class="p">(</span><span class="mi">2</span><span class="p">:</span><span class="k">end</span><span class="p">);</span>
</span><span class='line'><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
</span><span class='line'><span class="n">bar</span><span class="p">(</span><span class="n">x_l2</span><span class="p">),</span> <span class="n">axis</span> <span class="n">tight</span><span class="p">;</span>
</span><span class='line'><span class="n">title</span><span class="p">(</span><span class="s">&#39;L2 Regularization&#39;</span><span class="p">);</span>
</span><span class='line'><span class="n">y_l2</span> <span class="p">=</span> <span class="n">A</span> <span class="o">*</span> <span class="n">x_l2</span> <span class="o">+</span> <span class="n">b_l2</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c">% L1 (Lasso)</span>
</span><span class='line'><span class="p">[</span><span class="n">x_l1</span><span class="p">,</span> <span class="n">fitinfo</span><span class="p">]</span> <span class="p">=</span> <span class="n">lasso</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="s">&#39;Lambda&#39;</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">);</span>
</span><span class='line'><span class="n">b_l1</span> <span class="p">=</span> <span class="n">fitinfo</span><span class="p">.</span><span class="n">Intercept</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span class='line'><span class="n">y_l1</span> <span class="p">=</span> <span class="n">A</span> <span class="o">*</span> <span class="n">x_l1</span> <span class="o">+</span> <span class="n">b_l1</span><span class="p">;</span>
</span><span class='line'><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
</span><span class='line'><span class="n">bar</span><span class="p">(</span><span class="n">x_l1</span><span class="p">),</span> <span class="n">axis</span> <span class="n">tight</span><span class="p">;</span>
</span><span class='line'><span class="n">title</span><span class="p">(</span><span class="s">&#39;L1 Regularization&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="c">% L1 (Elastic Net)</span>
</span><span class='line'><span class="p">[</span><span class="n">x_en</span><span class="p">,</span> <span class="n">fitinfo_en</span><span class="p">]</span> <span class="p">=</span> <span class="n">lasso</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="s">&#39;Lambda&#39;</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="s">&#39;Alpha&#39;</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">);</span>
</span><span class='line'><span class="n">b_en</span> <span class="p">=</span> <span class="n">fitinfo_en</span><span class="p">.</span><span class="n">Intercept</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span class='line'><span class="n">y_en</span> <span class="p">=</span> <span class="n">A</span> <span class="o">*</span> <span class="n">x_en</span> <span class="o">+</span> <span class="n">b_en</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="n">MSE_y</span> <span class="p">=</span> <span class="p">[</span><span class="n">mse</span><span class="p">(</span><span class="n">y_ols</span><span class="o">-</span><span class="n">y</span><span class="p">),</span> <span class="n">mse</span><span class="p">(</span><span class="n">y_l2</span><span class="o">-</span><span class="n">y</span><span class="p">),</span> <span class="n">mse</span><span class="p">(</span><span class="n">y_l1</span><span class="o">-</span><span class="n">y</span><span class="p">),</span> <span class="n">mse</span><span class="p">(</span><span class="n">y_en</span><span class="o">-</span><span class="n">y</span><span class="p">)];</span>
</span><span class='line'><span class="nb">disp</span><span class="p">(</span><span class="s">&#39;Mean square error: &#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">fprintf</span><span class="p">(</span><span class="s">&#39;%g    &#39;</span><span class="p">,</span> <span class="n">MSE_y</span><span class="p">);</span> <span class="n">fprintf</span><span class="p">(</span><span class="s">&#39;\n\n&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="c">% Plot the recovered coefficients</span>
</span><span class='line'><span class="n">figure</span><span class="p">,</span> <span class="n">hold</span> <span class="n">on</span>
</span><span class='line'><span class="n">plot</span><span class="p">(</span><span class="n">x_l1</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">);</span>
</span><span class='line'><span class="n">plot</span><span class="p">(</span><span class="n">x_en</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">);</span>
</span><span class='line'><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s">&#39;g--&#39;</span><span class="p">);</span>
</span><span class='line'><span class="n">legend</span><span class="p">(</span><span class="s">&#39;Lasso Coef&#39;</span><span class="p">,</span> <span class="s">&#39;Elastic Net coef&#39;</span><span class="p">,</span> <span class="s">&#39;Original Coef&#39;</span><span class="p">);</span>
</span></code></pre>
</td>
</tr>
</table>
</div>
</figure>
</notextile>
</div>
<p>Output:</p>
<div class="bogus-wrapper">
<notextile>
<figure class="code">
<figcaption>
<span></span>
</figcaption>
<div class="highlight">
<table>
<tr>
<td class="gutter">
<pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre>
</td>
<td class="code">
<pre><code class='matlab'><span class='line'><span class="n">Mean</span> <span class="n">square</span> <span class="n">error</span><span class="p">:</span>
</span><span class='line'><span class="mf">1.81793e-29</span>    <span class="mf">7.93494e-15</span>    <span class="mf">0.0975002</span>    <span class="mf">0.0641214</span>
</span></code></pre>
</td>
</tr>
</table>
</div>
</figure>
</notextile>
</div>
<p>The above code snippets generates an under-determined matrix <span class="math inline">\(A\)</span>, and a sparse coefficients which has 200 variables but only 10 of them are non-zeros. Noises are added to the responses. We then run the proposed three methods to try to recover the coefficients. It then generates two plots:</p>
<ol type="1">
<li>The first plot is as shown in the top. As we can see, OLS does a very bad job, though the MSE is minimized to zero. L2-regularization do find some of the sparks, but there are also lots of non-zeros introduced. Finally, L1-regularization finds most of the non-zeros correctly and resembles the original coefficients most.</li>
<li>The second plot shows how similar the recovered coefficients by lasso and elastic nets resemble the original coefficients. As we can see, both of them can recover most parts, while elastic nets contain some small ‘noise’. However, elastic net yields a slightly better MSE than lasso.</li>
</ol>
<figure>
<img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/2014-05-14-a-comparison-of-least-square-l2-regularization-and-l1-regularization/plot.png" alt="Plot of Coefficients" /><figcaption>Plot of Coefficients</figcaption>
</figure>
<h2 id="probing-further">Probing Further</h2>
<p>Scikit has some excellent examples on regualarization (<a href="http://scikit-learn.org/stable/modules/linear_model.html">1</a>, <a href="http://scikit-learn.org/stable/auto_examples/linear_model/plot_lasso_and_elasticnet.html">2</a>). Quora has an excellent <a href="http://www.quora.com/Machine-Learning/What-is-the-difference-between-L1-and-L2-regularization">discussion</a> on L2 vs L1 regualarization. I found the top three answers very useful in understanding deeper, especially from the <em>Bayesian regularization paradigm</em> perspective by thinking the regularization as MAP (Maximum A Posteriori) that adds a Laplacian (L1) or Gaussian (L2) prior to the original objective.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Debugging AppleScript: print to a file]]></title>
    <link href="http://blog.ivansiu.com/blog/2014/05/02/debugging-applescript-print-to-a-file/"/>
    <updated>2014-05-02T14:26:50-07:00</updated>
    <id>http://blog.ivansiu.com/blog/2014/05/02/debugging-applescript-print-to-a-file</id>
    <content type="html"><![CDATA[<p>Debugging AppleScript is easy when you work with the script editor, simply use <code>log</code> to print out anything in the console. However, after you compiled it to an app, this cannot work anymore.</p>
<p>I find there are several ways to do it in this <a href="http://stackoverflow.com/questions/2749863/applescript-editor-write-message-to-the-result-window">thread</a>. The <a href="http://stackoverflow.com/a/21309748/577704">two approaches</a> that work best for me are:</p>
<!-- more -->
<ol type="1">
<li>Use <code>logger</code> to log to the syslog. E.g.,</li>
</ol>
<div class="bogus-wrapper">
<notextile>
<figure class="code">
<figcaption>
<span></span>
</figcaption>
<div class="highlight">
<table>
<tr>
<td class="gutter">
<pre class="line-numbers"><span class='line-number'>1</span>
</pre>
</td>
<td class="code">
<pre><code class='applescript'><span class='line'><span class="nb">do shell script</span> <span class="s2">&quot;logger -t &#39;AS DEBUG&#39; &quot;</span> <span class="o">&amp;</span> <span class="nv">myObj</span>
</span></code></pre>
</td>
</tr>
</table>
</div>
</figure>
</notextile>
</div>
<p>However, I don’t know why sometimes this is not logged. So I will use the following:</p>
<ol start="2" type="1">
<li>Echo to file</li>
</ol>
<div class="bogus-wrapper">
<notextile>
<figure class="code">
<figcaption>
<span></span>
</figcaption>
<div class="highlight">
<table>
<tr>
<td class="gutter">
<pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre>
</td>
<td class="code">
<pre><code class='applescript'><span class='line'><span class="nb">do shell script</span> <span class="s2">&quot;echo &quot;</span> <span class="o">&amp;</span> <span class="nb">quoted form</span> <span class="k">of</span> <span class="p">(</span><span class="nv">myObj</span> <span class="k">as </span><span class="nc">string</span><span class="p">)</span> <span class="o">&amp;</span> <span class="se">¬</span>
</span><span class='line'>    <span class="s2">&quot; &gt;&gt; ~/Desktop/as_debug.txt&quot;</span>
</span></code></pre>
</td>
</tr>
</table>
</div>
</figure>
</notextile>
</div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[OS X: reveal file in console]]></title>
    <link href="http://blog.ivansiu.com/blog/2014/05/01/os-x-reveal-file-in-console/"/>
    <updated>2014-05-01T17:58:20-07:00</updated>
    <id>http://blog.ivansiu.com/blog/2014/05/01/os-x-reveal-file-in-console</id>
    <content type="html"><![CDATA[<figure>
<img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/2014-05-01-os-x-reveal-file-in-console.png" />
</figure>
<p>One of the neat things you can do in OS X is to reveal a file in Finder.app from some other applications. Turns out lots of the time, we also want to do that in the terminal. The following script helps you with that:</p>
<!-- more -->
<div class="bogus-wrapper">
<notextile>
<figure class="code">
<figcaption>
<span>reveal</span>
</figcaption>
<div class="highlight">
<table>
<tr>
<td class="gutter">
<pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre>
</td>
<td class="code">
<pre><code class='applescript'><span class='line'><span class="c">#!/usr/bin/osascript</span>
</span><span class='line'><span class="k">on</span> <span class="nb">run</span> <span class="nv">args</span>
</span><span class='line'>  <span class="k">set</span> <span class="nv">fullpath</span> <span class="k">to</span> <span class="nb">do shell script</span> <span class="s2">&quot;realpath &quot;</span> <span class="o">&amp;</span> <span class="p">(</span><span class="nb">quoted form</span> <span class="k">of</span> <span class="nb">first</span> <span class="nb">item</span> <span class="k">of</span> <span class="nv">args</span><span class="p">)</span>
</span><span class='line'>  <span class="k">set</span> <span class="nv">theFile</span> <span class="k">to</span> <span class="nv">POSIX</span> <span class="nv">file</span> <span class="nv">fullpath</span>
</span><span class='line'>  <span class="k">tell</span> <span class="nb">application</span> <span class="s2">&quot;Finder&quot;</span>
</span><span class='line'>      <span class="nv">reveal</span> <span class="nv">theFile</span>
</span><span class='line'>      <span class="nb">activate</span>
</span><span class='line'>  <span class="k">end</span> <span class="k">tell</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre>
</td>
</tr>
</table>
</div>
</figure>
</notextile>
</div>
<p>Note:</p>
<ol type="1">
<li>You should put this into a directory in your search path. I recommend in <code>~/bin</code>. Also remember to <code>chmod +x</code>.</li>
<li>The above requires another script <code>realpath</code>, which returns the fullpath of a file. You can find it <a href="http://blog.ivansiu.com/blog/2014/05/01/os-x-get-full-path-of-file-using-realpath/">here</a>.</li>
</ol>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[OS X: get full path of file using realpath]]></title>
    <link href="http://blog.ivansiu.com/blog/2014/05/01/os-x-get-full-path-of-file-using-realpath/"/>
    <updated>2014-05-01T16:25:56-07:00</updated>
    <id>http://blog.ivansiu.com/blog/2014/05/01/os-x-get-full-path-of-file-using-realpath</id>
    <content type="html"><![CDATA[<div class="bogus-wrapper">
<notextile>
<figure class="code">
<figcaption>
<span>Demonstrate of realpath</span>
</figcaption>
<div class="highlight">
<table>
<tr>
<td class="gutter">
<pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre>
</td>
<td class="code">
<pre><code class='bash'><span class='line'>➜  /Applications  realpath iBooks.app
</span><span class='line'>/Applications/iBooks.app
</span><span class='line'>➜  /Applications
</span></code></pre>
</td>
</tr>
</table>
</div>
</figure>
</notextile>
</div>
<p><code>realpath</code> is a command line utility that is included in most UNIX distributions but not Mac OS X. Thanks to <a href="https://github.com/harto">Stuart Campbell</a>, a minimal implementation is provided <a href="https://github.com/harto/realpath-osx">here</a>, and my <a href="https://github.com/iveney/realpath-osx">fork</a>.</p>
<!-- more -->
<p>If you use <code>homebrew</code>, you can tap my <a href="https://github.com/iveney/homebrew-mocha">repo</a>, and install it using homebrew.</p>
<div class="bogus-wrapper">
<notextile>
<figure class="code">
<figcaption>
<span></span>
</figcaption>
<div class="highlight">
<table>
<tr>
<td class="gutter">
<pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre>
</td>
<td class="code">
<pre><code class='bash'><span class='line'>brew tap iveney/mocha
</span><span class='line'>brew install realpath
</span></code></pre>
</td>
</tr>
</table>
</div>
</figure>
</notextile>
</div>
<p>Viola! Now you can get the full path of file in console. A nice thing I often use is to chain it with <code>pbcopy</code> to copy the full path to the OS X clipboard.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Send ctrl-a in tmux after rebinding to it]]></title>
    <link href="http://blog.ivansiu.com/blog/2014/05/01/send-ctrl-a-in-tmux-after-rebinding-to-it/"/>
    <updated>2014-05-01T15:14:46-07:00</updated>
    <id>http://blog.ivansiu.com/blog/2014/05/01/send-ctrl-a-in-tmux-after-rebinding-to-it</id>
    <content type="html"><![CDATA[<figure>
<img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/2014-05-01-send-ctrl-a-in-tmux-after-rebinding-to-it.png" />
</figure>
<p>While <code>tmux</code> provides much better functionality than <code>screen</code>, most of us that work with tmux have been using <code>screen</code> for a long time, and it is more comfortable for us to use <code>ctrl-a</code> than the default <code>ctrl-b</code>, which is finger-strechy. Thus the first thing I will do after installing <code>tmux</code> is to rebind the prefix to <code>ctrl-a</code>. That gives us the most handy way of swapping last two windows by typing <code>ctrl-a ctrl-a</code>.</p>
<!-- more -->
<p>However, this comes for a price. That is, in a shell environment that is integrated with <code>readline</code>, <code>ctrl-a</code> is used to jump the begining of line. Now that it is mapped as prefix, we can no longer do that.</p>
<p>Surprisingly, the solution is pretty simple. Just use <code>ctrl-a a</code> to send the prefix itself, and use <code>ctrl-a ctrl-a</code> to go to the last window. Specifically, add these two lines in <code>~/.tmux.conf</code>:</p>
<div class="bogus-wrapper">
<notextile>
<figure class="code">
<figcaption>
<span>~/.tmux.conf</span>
</figcaption>
<div class="highlight">
<table>
<tr>
<td class="gutter">
<pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre>
</td>
<td class="code">
<pre><code class='bash'><span class='line'><span class="nb">bind </span>a send-prefix
</span><span class='line'><span class="nb">bind</span>-key C-a last-window
</span></code></pre>
</td>
</tr>
</table>
</div>
</figure>
</notextile>
</div>
<p><a href="http://stackoverflow.com/questions/11557076/if-i-set-key-bind-of-c-b-to-c-a-in-tmux-how-can-i-move-the-cursor-to-the-beginni#comment15297769_11561128">via</a>.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Source-highlight for matlab/octave]]></title>
    <link href="http://blog.ivansiu.com/blog/2014/04/30/source-highlight-for-matlab-slash-octave/"/>
    <updated>2014-04-30T23:59:40-07:00</updated>
    <id>http://blog.ivansiu.com/blog/2014/04/30/source-highlight-for-matlab-slash-octave</id>
    <content type="html"><![CDATA[<figure>
<img src="https://res.cloudinary.com/maomao/image/upload/v1491291930/blog/2014-05-01-source-highlight-for-matlab-slash-octave.png" />
</figure>
<p>I recently worked with Matlab a lot. When in console, sometimes I want to use <code>less</code> to quickly examine the file content, and I have already <a href="http://superuser.com/a/71593">set it up</a> such that it uses <a href="http://www.gnu.org/software/src-highlite/">source-highlight</a> to output colorful escape sequence to the console. However, source-highlight does not come with a syntax support for Matlab by default. Luckily, this <a href="http://blog.sina.com.cn/s/blog_4513dde60100o6o4.html">post</a> and <a href="http://blog.sina.com.cn/s/blog_4513dde60101kpmr.html">this</a> (in Chinese) provides a solution.</p>
<!-- more -->
<p>First of all, install source-highlight using homebrew.</p>
<div class="bogus-wrapper">
<notextile>
<figure class="code">
<div class="highlight">
<table>
<tr>
<td class="gutter">
<pre class="line-numbers"><span class='line-number'>1</span>
</pre>
</td>
<td class="code">
<pre><code class=''><span class='line'>brew install source-highlight</span></code></pre>
</td>
</tr>
</table>
</div>
</figure>
</notextile>
</div>
<p>Note that source-highlight depends on boost, and as of the date of this post, brew provides a precompiled library (bottle) for boost. However, the python support is compiled against the system python, so if you installed a custom one (say installed via homebrew) and use it by default, brew will compile the boost from source instead, which takes an extremely long time. To prevent this, we need to unlink it first, and link it back afterwards. That is,</p>
<div class="bogus-wrapper">
<notextile>
<figure class="code">
<figcaption>
<span></span>
</figcaption>
<div class="highlight">
<table>
<tr>
<td class="gutter">
<pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre>
</td>
<td class="code">
<pre><code class='bash'><span class='line'>brew unlink python
</span><span class='line'>brew link python    <span class="c"># after installation</span>
</span></code></pre>
</td>
</tr>
</table>
</div>
</figure>
</notextile>
</div>
<p>Go to the following folder and create two files,</p>
<div class="bogus-wrapper">
<notextile>
<figure class="code">
<figcaption>
<span></span>
</figcaption>
<div class="highlight">
<table>
<tr>
<td class="gutter">
<pre class="line-numbers"><span class='line-number'>1</span>
</pre>
</td>
<td class="code">
<pre><code class='bash'><span class='line'><span class="nb">cd</span> <span class="sb">`</span>brew --prefix <span class="nb">source</span>-highlight<span class="sb">`</span>/share/source-highlight
</span></code></pre>
</td>
</tr>
</table>
</div>
</figure>
</notextile>
</div>
<div class="bogus-wrapper">
<notextile>
<figure class="code">
<figcaption>
<span>matlab.style</span>
</figcaption>
<div class="highlight">
<table>
<tr>
<td class="gutter">
<pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre>
</td>
<td class="code">
<pre><code class='ini'><span class='line'><span class="err">keyword</span> <span class="err">blue</span><span class="c1">;</span>
</span><span class='line'><span class="err">string</span> <span class="c1">#a020f0;</span>
</span><span class='line'><span class="err">comment</span> <span class="err">darkgreen</span><span class="c1">;</span>
</span></code></pre>
</td>
</tr>
</table>
</div>
</figure>
</notextile>
</div>
<div class="bogus-wrapper">
<notextile>
<figure class="code">
<figcaption>
<span>matlab.lang</span>
</figcaption>
<div class="highlight">
<table>
<tr>
<td class="gutter">
<pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre>
</td>
<td class="code">
<pre><code class='ini'><span class='line'><span class="na">keyword</span> <span class="o">=</span> <span class="s">&quot;break|case|catch|classdef|continue|else|elseif|end|for|function|global|if|otherwise|parfor|persistent|return|spmd|switch|try|while&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="na">keyword</span> <span class="o">=</span> <span class="s">&#39;^\s*(break|case|catch|classdef|continue|else|elseif|end|for|function|global|if|otherwise|parfor|persistent|return|spmd|switch|try|while)(?=\s)&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="err">include</span> <span class="err">&quot;function.lang&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="na">state command start &#39;^\s*[a-zA-Z][\w]*(?</span><span class="o">=</span><span class="s">\s)(?!\s+\.?[*/+-:]\s+\w)(?!\s+=)&#39; begin</span>
</span><span class='line'><span class="s">        comment start &quot;%&quot;</span>
</span><span class='line'><span class="s">        string delim &#39;[[:blank:]]&#39; &#39;[^%;]*&#39;</span>
</span><span class='line'><span class="err">end</span>
</span><span class='line'>
</span><span class='line'><span class="err">comment</span> <span class="err">delim</span> <span class="err">&quot;%{&quot;</span> <span class="err">&quot;%}&quot;</span> <span class="err">multiline</span> <span class="err">nested</span>
</span><span class='line'><span class="err">comment</span> <span class="err">start</span> <span class="err">&quot;%&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="err">string</span> <span class="err">delim</span> <span class="err">&#39;(?&lt;![\w.])\&#39;&#39;</span> <span class="err">&quot;&#39;&quot;</span> <span class="err">escape</span> <span class="err">&quot;&#39;&#39;&quot;</span>
</span></code></pre>
</td>
</tr>
</table>
</div>
</figure>
</notextile>
</div>
<p>Finally, edit <code>lang.map</code> to create a mapping for matlab file.</p>
<div class="bogus-wrapper">
<notextile>
<figure class="code">
<figcaption>
<span>lang.map</span>
</figcaption>
<div class="highlight">
<table>
<tr>
<td class="gutter">
<pre class="line-numbers"><span class='line-number'>1</span>
</pre>
</td>
<td class="code">
<pre><code class='bash'><span class='line'><span class="nb">echo</span> <span class="s1">&#39;m = matlab.lang&#39;</span> &gt;&gt; lang.map
</span></code></pre>
</td>
</tr>
</table>
</div>
</figure>
</notextile>
</div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Batch remove photos in iPhone, batch convert videos and upload back]]></title>
    <link href="http://blog.ivansiu.com/blog/2014/01/29/batch-remove-photos-in-iphone/"/>
    <updated>2014-01-29T18:16:21-08:00</updated>
    <id>http://blog.ivansiu.com/blog/2014/01/29/batch-remove-photos-in-iphone</id>
    <content type="html"><![CDATA[<p>One of the problems that drives iOS user crazy is the user-unfriendly manipulation/syncing of photos in iOS. There are just no easy way to remove photos in batch (though you can delete the entire camera roll in the settings).</p>
<!-- more -->
<p>There are several ways to manipulate it, but really not enough:</p>
<ol type="1">
<li>use iPhoto/Aperture to import and delete. However, the photos must be imported first, I cannot just delete it. Ever since there is iCloud, importing becomes not that important.</li>
<li>use iTunes to Sync. Same as above, ever since iCloud, no reason to sync again.</li>
<li>the only way to use built-in tools to manipulate the camera roll is to use Image Capture utility. That way, one can select and delete photos. However, it still does not have custom filtering of photos and does not support albums.</li>
</ol>
<p>The workflow I adopted is a two-step approach: mark those I want to keep in the iPhone, delete all stuff using the 3rd method, then upload back.</p>
<p>If you have some videos that occupy lots of space, you can convert them to lower quality. To do this, HandBrake is the excellent tool, which is open-sourced. However, it does not support batch change. Luckily, <a href="http://www.osomac.com/apps/osx/handbrake-batch/">HandBrakeBatch</a> by <a href="http://www.osomac.com">OSOMAC</a> can achieve this.</p>
<p>To upload things back, <a href="http://rambax.com/simpletransfer.html">SimpleTransfer</a> can help, especially for videos, which cannot be put back into camera roll easily (I have no idea why apple restricts this). The lite version is free, but you can only upload one item at a time, and there are also some restrictions.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Fix (ugly) Safari 7.0 not using local pac file]]></title>
    <link href="http://blog.ivansiu.com/blog/2013/12/05/fix-ugly-safari-7-dot-0-not-using-local-pac-file/"/>
    <updated>2013-12-05T00:03:43-08:00</updated>
    <id>http://blog.ivansiu.com/blog/2013/12/05/fix-ugly-safari-7-dot-0-not-using-local-pac-file</id>
    <content type="html"><![CDATA[<p>I found that Safari in Mavericks is not using local <code>proxy.pac</code> at all. Turns out because of sandboxing, it will not allow reading file from local. A traditional solution is to turn on <strong>Web Sharing</strong>, and thus use HTTP to read the pac file such as <code>http://localhost/proxy.pac</code>.</p>
<p>However, this cannot be done that simple, since Apple removed Web Sharing from normal version of Mavericks. To turn on the web service (Apache), do this:</p>
<div class="bogus-wrapper">
<notextile>
<figure class="code">
<div class="highlight">
<table>
<tr>
<td class="gutter">
<pre class="line-numbers"><span class='line-number'>1</span>
</pre>
</td>
<td class="code">
<pre><code class=''><span class='line'>sudo apachectl start</span></code></pre>
</td>
</tr>
</table>
</div>
</figure>
</notextile>
</div>
<p>Also, place the pac file under <code>/Library/WebServer/Documents</code>, which is the default Document Root of Apache.</p>
<p>Tom Fischer proposed <a href="https://discussions.apple.com/thread/3202499?start=30&amp;tstart=0">another way</a> to get around, however I don’t think it a good idea to mess around the system files.</p>
]]></content>
  </entry>
  
</feed>
